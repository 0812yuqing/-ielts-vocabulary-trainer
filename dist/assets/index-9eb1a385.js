var ot=Object.defineProperty;var dt=(t,s,a)=>s in t?ot(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var W=(t,s,a)=>(dt(t,typeof s!="symbol"?s+"":s,a),a);import{r as h,a as xt,b as ut,g as mt,R as fe}from"./vendor-f817694b.js";import{m as O,T as ge,Z as _e,a as ht,A as ye,V as ue,X as pt,C as ft,b as Be,B as gt,c as ze,F as yt,d as $e,e as vt,f as jt,g as Nt,h as wt,i as Fe,j as bt,S as St,k as Et,l as Tt,P as Rt,n as At,D as Ct,U as It,R as Dt,o as kt,p as Ot}from"./ui-4c1cc26b.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();var Ve={exports:{}},ne={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt=h,Lt=Symbol.for("react.element"),Mt=Symbol.for("react.fragment"),Wt=Object.prototype.hasOwnProperty,Ut=Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_t={key:!0,ref:!0,__self:!0,__source:!0};function qe(t,s,a){var i,r={},n=null,l=null;a!==void 0&&(n=""+a),s.key!==void 0&&(n=""+s.key),s.ref!==void 0&&(l=s.ref);for(i in s)Wt.call(s,i)&&!_t.hasOwnProperty(i)&&(r[i]=s[i]);if(t&&t.defaultProps)for(i in s=t.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return{$$typeof:Lt,type:t,key:n,ref:l,props:r,_owner:Ut.current}}ne.Fragment=Mt;ne.jsx=qe;ne.jsxs=qe;Ve.exports=ne;var e=Ve.exports,me={},Se=xt;me.createRoot=Se.createRoot,me.hydrateRoot=Se.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},ee.apply(this,arguments)}var F;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(F||(F={}));const Ee="popstate";function Bt(t){t===void 0&&(t={});function s(i,r){let{pathname:n,search:l,hash:d}=i.location;return he("",{pathname:n,search:l,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(i,r){return typeof r=="string"?r:He(r)}return $t(s,a,null,t)}function k(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Ge(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function zt(){return Math.random().toString(36).substr(2,8)}function Te(t,s){return{usr:t.state,key:t.key,idx:s}}function he(t,s,a,i){return a===void 0&&(a=null),ee({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Q(s):s,{state:a,key:s&&s.key||i||zt()})}function He(t){let{pathname:s="/",search:a="",hash:i=""}=t;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Q(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substr(a),t=t.substr(0,a));let i=t.indexOf("?");i>=0&&(s.search=t.substr(i),t=t.substr(0,i)),t&&(s.pathname=t)}return s}function $t(t,s,a,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:n=!1}=i,l=r.history,d=F.Pop,o=null,u=x();u==null&&(u=0,l.replaceState(ee({},l.state,{idx:u}),""));function x(){return(l.state||{idx:null}).idx}function c(){d=F.Pop;let y=x(),g=y==null?null:y-u;u=y,o&&o({action:d,location:b.location,delta:g})}function m(y,g){d=F.Push;let S=he(b.location,y,g);a&&a(S,y),u=x()+1;let j=Te(S,u),A=b.createHref(S);try{l.pushState(j,"",A)}catch(p){if(p instanceof DOMException&&p.name==="DataCloneError")throw p;r.location.assign(A)}n&&o&&o({action:d,location:b.location,delta:1})}function f(y,g){d=F.Replace;let S=he(b.location,y,g);a&&a(S,y),u=x();let j=Te(S,u),A=b.createHref(S);l.replaceState(j,"",A),n&&o&&o({action:d,location:b.location,delta:0})}function w(y){let g=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof y=="string"?y:He(y);return S=S.replace(/ $/,"%20"),k(g,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,g)}let b={get action(){return d},get location(){return t(r,l)},listen(y){if(o)throw new Error("A history only accepts one active listener");return r.addEventListener(Ee,c),o=y,()=>{r.removeEventListener(Ee,c),o=null}},createHref(y){return s(r,y)},createURL:w,encodeLocation(y){let g=w(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:f,go(y){return l.go(y)}};return b}var Re;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Re||(Re={}));function Ft(t,s,a){return a===void 0&&(a="/"),Vt(t,s,a,!1)}function Vt(t,s,a,i){let r=typeof s=="string"?Q(s):s,n=Qe(r.pathname||"/",a);if(n==null)return null;let l=Ye(t);qt(l);let d=null;for(let o=0;d==null&&o<l.length;++o){let u=ss(n);d=es(l[o],u,i)}return d}function Ye(t,s,a,i){s===void 0&&(s=[]),a===void 0&&(a=[]),i===void 0&&(i="");let r=(n,l,d)=>{let o={relativePath:d===void 0?n.path||"":d,caseSensitive:n.caseSensitive===!0,childrenIndex:l,route:n};o.relativePath.startsWith("/")&&(k(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(i.length));let u=q([i,o.relativePath]),x=a.concat(o);n.children&&n.children.length>0&&(k(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ye(n.children,s,x,u)),!(n.path==null&&!n.index)&&s.push({path:u,score:Kt(u,n.index),routesMeta:x})};return t.forEach((n,l)=>{var d;if(n.path===""||!((d=n.path)!=null&&d.includes("?")))r(n,l);else for(let o of Xe(n.path))r(n,l,o)}),s}function Xe(t){let s=t.split("/");if(s.length===0)return[];let[a,...i]=s,r=a.endsWith("?"),n=a.replace(/\?$/,"");if(i.length===0)return r?[n,""]:[n];let l=Xe(i.join("/")),d=[];return d.push(...l.map(o=>o===""?n:[n,o].join("/"))),r&&d.push(...l),d.map(o=>t.startsWith("/")&&o===""?"/":o)}function qt(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:Zt(s.routesMeta.map(i=>i.childrenIndex),a.routesMeta.map(i=>i.childrenIndex)))}const Gt=/^:[\w-]+$/,Ht=3,Yt=2,Xt=1,Qt=10,Jt=-2,Ae=t=>t==="*";function Kt(t,s){let a=t.split("/"),i=a.length;return a.some(Ae)&&(i+=Jt),s&&(i+=Yt),a.filter(r=>!Ae(r)).reduce((r,n)=>r+(Gt.test(n)?Ht:n===""?Xt:Qt),i)}function Zt(t,s){return t.length===s.length&&t.slice(0,-1).every((i,r)=>i===s[r])?t[t.length-1]-s[s.length-1]:0}function es(t,s,a){a===void 0&&(a=!1);let{routesMeta:i}=t,r={},n="/",l=[];for(let d=0;d<i.length;++d){let o=i[d],u=d===i.length-1,x=n==="/"?s:s.slice(n.length)||"/",c=Ce({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},x),m=o.route;if(!c&&u&&a&&!i[i.length-1].route.index&&(c=Ce({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},x)),!c)return null;Object.assign(r,c.params),l.push({params:r,pathname:q([n,c.pathname]),pathnameBase:ns(q([n,c.pathnameBase])),route:m}),c.pathnameBase!=="/"&&(n=q([n,c.pathnameBase]))}return l}function Ce(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,i]=ts(t.path,t.caseSensitive,t.end),r=s.match(a);if(!r)return null;let n=r[0],l=n.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:i.reduce((u,x,c)=>{let{paramName:m,isOptional:f}=x;if(m==="*"){let b=d[c]||"";l=n.slice(0,n.length-b.length).replace(/(.)\/+$/,"$1")}const w=d[c];return f&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:n,pathnameBase:l,pattern:t}}function ts(t,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),Ge(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,o)=>(i.push({paramName:d,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,s?void 0:"i"),i]}function ss(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ge(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Qe(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,i=t.charAt(a);return i&&i!=="/"?null:t.slice(a)||"/"}function as(t,s){s===void 0&&(s="/");let{pathname:a,search:i="",hash:r=""}=typeof t=="string"?Q(t):t;return{pathname:a?a.startsWith("/")?a:is(a,s):s,search:ls(i),hash:cs(r)}}function is(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function oe(t,s,a,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rs(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function Je(t,s){let a=rs(t);return s?a.map((i,r)=>r===a.length-1?i.pathname:i.pathnameBase):a.map(i=>i.pathnameBase)}function Ke(t,s,a,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Q(t):(r=ee({},t),k(!r.pathname||!r.pathname.includes("?"),oe("?","pathname","search",r)),k(!r.pathname||!r.pathname.includes("#"),oe("#","pathname","hash",r)),k(!r.search||!r.search.includes("#"),oe("#","search","hash",r)));let n=t===""||r.pathname==="",l=n?"/":r.pathname,d;if(l==null)d=a;else{let c=s.length-1;if(!i&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),c-=1;r.pathname=m.join("/")}d=c>=0?s[c]:"/"}let o=as(r,d),u=l&&l!=="/"&&l.endsWith("/"),x=(n||l===".")&&a.endsWith("/");return!o.pathname.endsWith("/")&&(u||x)&&(o.pathname+="/"),o}const q=t=>t.join("/").replace(/\/\/+/g,"/"),ns=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ls=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cs=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function os(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ze=["post","put","patch","delete"];new Set(Ze);const ds=["get",...Ze];new Set(ds);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function te(){return te=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},te.apply(this,arguments)}const ve=h.createContext(null),xs=h.createContext(null),se=h.createContext(null),le=h.createContext(null),H=h.createContext({outlet:null,matches:[],isDataRoute:!1}),et=h.createContext(null);function ae(){return h.useContext(le)!=null}function je(){return ae()||k(!1),h.useContext(le).location}function tt(t){h.useContext(se).static||h.useLayoutEffect(t)}function Ne(){let{isDataRoute:t}=h.useContext(H);return t?Ss():us()}function us(){ae()||k(!1);let t=h.useContext(ve),{basename:s,future:a,navigator:i}=h.useContext(se),{matches:r}=h.useContext(H),{pathname:n}=je(),l=JSON.stringify(Je(r,a.v7_relativeSplatPath)),d=h.useRef(!1);return tt(()=>{d.current=!0}),h.useCallback(function(u,x){if(x===void 0&&(x={}),!d.current)return;if(typeof u=="number"){i.go(u);return}let c=Ke(u,JSON.parse(l),n,x.relative==="path");t==null&&s!=="/"&&(c.pathname=c.pathname==="/"?s:q([s,c.pathname])),(x.replace?i.replace:i.push)(c,x.state,x)},[s,i,l,n,t])}function ms(t,s){return hs(t,s)}function hs(t,s,a,i){ae()||k(!1);let{navigator:r}=h.useContext(se),{matches:n}=h.useContext(H),l=n[n.length-1],d=l?l.params:{};l&&l.pathname;let o=l?l.pathnameBase:"/";l&&l.route;let u=je(),x;if(s){var c;let y=typeof s=="string"?Q(s):s;o==="/"||(c=y.pathname)!=null&&c.startsWith(o)||k(!1),x=y}else x=u;let m=x.pathname||"/",f=m;if(o!=="/"){let y=o.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=Ft(t,{pathname:f}),b=vs(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},d,y.params),pathname:q([o,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?o:q([o,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),n,a,i);return s&&b?h.createElement(le.Provider,{value:{location:te({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:F.Pop}},b):b}function ps(){let t=bs(),s=os(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},n=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},s),a?h.createElement("pre",{style:r},a):null,n)}const fs=h.createElement(ps,null);class gs extends h.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error!==void 0?h.createElement(H.Provider,{value:this.props.routeContext},h.createElement(et.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ys(t){let{routeContext:s,match:a,children:i}=t,r=h.useContext(ve);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),h.createElement(H.Provider,{value:s},i)}function vs(t,s,a,i){var r;if(s===void 0&&(s=[]),a===void 0&&(a=null),i===void 0&&(i=null),t==null){var n;if(!a)return null;if(a.errors)t=a.matches;else if((n=i)!=null&&n.v7_partialHydration&&s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let l=t,d=(r=a)==null?void 0:r.errors;if(d!=null){let x=l.findIndex(c=>c.route.id&&(d==null?void 0:d[c.route.id])!==void 0);x>=0||k(!1),l=l.slice(0,Math.min(l.length,x+1))}let o=!1,u=-1;if(a&&i&&i.v7_partialHydration)for(let x=0;x<l.length;x++){let c=l[x];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=x),c.route.id){let{loaderData:m,errors:f}=a,w=c.route.loader&&m[c.route.id]===void 0&&(!f||f[c.route.id]===void 0);if(c.route.lazy||w){o=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((x,c,m)=>{let f,w=!1,b=null,y=null;a&&(f=d&&c.route.id?d[c.route.id]:void 0,b=c.route.errorElement||fs,o&&(u<0&&m===0?(Es("route-fallback",!1),w=!0,y=null):u===m&&(w=!0,y=c.route.hydrateFallbackElement||null)));let g=s.concat(l.slice(0,m+1)),S=()=>{let j;return f?j=b:w?j=y:c.route.Component?j=h.createElement(c.route.Component,null):c.route.element?j=c.route.element:j=x,h.createElement(ys,{match:c,routeContext:{outlet:x,matches:g,isDataRoute:a!=null},children:j})};return a&&(c.route.ErrorBoundary||c.route.errorElement||m===0)?h.createElement(gs,{location:a.location,revalidation:a.revalidation,component:b,error:f,children:S(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):S()},null)}var st=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(st||{}),re=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(re||{});function js(t){let s=h.useContext(ve);return s||k(!1),s}function Ns(t){let s=h.useContext(xs);return s||k(!1),s}function ws(t){let s=h.useContext(H);return s||k(!1),s}function at(t){let s=ws(),a=s.matches[s.matches.length-1];return a.route.id||k(!1),a.route.id}function bs(){var t;let s=h.useContext(et),a=Ns(re.UseRouteError),i=at(re.UseRouteError);return s!==void 0?s:(t=a.errors)==null?void 0:t[i]}function Ss(){let{router:t}=js(st.UseNavigateStable),s=at(re.UseNavigateStable),a=h.useRef(!1);return tt(()=>{a.current=!0}),h.useCallback(function(r,n){n===void 0&&(n={}),a.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,te({fromRouteId:s},n)))},[t,s])}const Ie={};function Es(t,s,a){!s&&!Ie[t]&&(Ie[t]=!0)}function Ts(t,s){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!s||s.v7_relativeSplatPath),s&&(s.v7_fetcherPersist,s.v7_normalizeFormMethod,s.v7_partialHydration,s.v7_skipActionErrorRevalidation)}function Rs(t){let{to:s,replace:a,state:i,relative:r}=t;ae()||k(!1);let{future:n,static:l}=h.useContext(se),{matches:d}=h.useContext(H),{pathname:o}=je(),u=Ne(),x=Ke(s,Je(d,n.v7_relativeSplatPath),o,r==="path"),c=JSON.stringify(x);return h.useEffect(()=>u(JSON.parse(c),{replace:a,state:i,relative:r}),[u,c,r,a,i]),null}function B(t){k(!1)}function As(t){let{basename:s="/",children:a=null,location:i,navigationType:r=F.Pop,navigator:n,static:l=!1,future:d}=t;ae()&&k(!1);let o=s.replace(/^\/*/,"/"),u=h.useMemo(()=>({basename:o,navigator:n,static:l,future:te({v7_relativeSplatPath:!1},d)}),[o,d,n,l]);typeof i=="string"&&(i=Q(i));let{pathname:x="/",search:c="",hash:m="",state:f=null,key:w="default"}=i,b=h.useMemo(()=>{let y=Qe(x,o);return y==null?null:{location:{pathname:y,search:c,hash:m,state:f,key:w},navigationType:r}},[o,x,c,m,f,w,r]);return b==null?null:h.createElement(se.Provider,{value:u},h.createElement(le.Provider,{children:a,value:b}))}function Cs(t){let{children:s,location:a}=t;return ms(pe(s),a)}new Promise(()=>{});function pe(t,s){s===void 0&&(s=[]);let a=[];return h.Children.forEach(t,(i,r)=>{if(!h.isValidElement(i))return;let n=[...s,r];if(i.type===h.Fragment){a.push.apply(a,pe(i.props.children,n));return}i.type!==B&&k(!1),!i.props.index||!i.props.children||k(!1);let l={id:i.props.id||n.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=pe(i.props.children,n)),a.push(l)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Is="6";try{window.__reactRouterVersion=Is}catch{}const Ds="startTransition",De=ut[Ds];function ks(t){let{basename:s,children:a,future:i,window:r}=t,n=h.useRef();n.current==null&&(n.current=Bt({window:r,v5Compat:!0}));let l=n.current,[d,o]=h.useState({action:l.action,location:l.location}),{v7_startTransition:u}=i||{},x=h.useCallback(c=>{u&&De?De(()=>o(c)):o(c)},[o,u]);return h.useLayoutEffect(()=>l.listen(x),[l,x]),h.useEffect(()=>Ts(i),[i]),h.createElement(As,{basename:s,children:a,location:d.location,navigationType:d.action,navigator:l,future:i})}var ke;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ke||(ke={}));var Oe;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Oe||(Oe={}));function it(t){var s,a,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=it(t[s]))&&(i&&(i+=" "),i+=a)}else for(a in t)t[a]&&(i&&(i+=" "),i+=a);return i}function z(){for(var t,s,a=0,i="",r=arguments.length;a<r;a++)(t=arguments[a])&&(s=it(t))&&(i&&(i+=" "),i+=s);return i}const E=({variant:t,className:s,children:a})=>{const i="relative overflow-hidden transition-all duration-200",r={default:"bg-pixel-black pixel-border",bordered:"bg-transparent pixel-border",elevated:"bg-pixel-black pixel-border shadow-lg transform hover:scale-105"};return e.jsxs("div",{className:z(i,r[t],s),children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-10",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-b from-transparent via-white/20 to-transparent animate-pulse"})}),e.jsx("div",{className:"relative z-10",children:a})]})},C=({variant:t,pixelSize:s="md",className:a,children:i,onClick:r,disabled:n=!1})=>{const l={sm:"px-3 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},d={primary:"bg-contra-gold text-pixel-black hover:bg-yellow-400 active:bg-yellow-500",secondary:"bg-pixel-gray text-pixel-white hover:bg-gray-600 active:bg-gray-700",danger:"bg-red-600 text-pixel-white hover:bg-red-700 active:bg-red-800","power-up":"bg-power-up-blue text-pixel-white hover:bg-blue-400 active:bg-blue-500"},o="pixel-font font-bold border-2 border-transparent transition-all duration-150 relative overflow-hidden";return e.jsxs(O.button,{className:z(o,l[s],d[t],"pixel-button",n&&"opacity-50 cursor-not-allowed",a),onClick:r,disabled:n,whileHover:n?{}:{scale:1.05},whileTap:n?{}:{scale:.95},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -translate-x-full group-hover:translate-x-full transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 border-2 border-white/20 pointer-events-none"}),e.jsx("span",{className:"relative z-10",children:i})]})},Pe=({currentLevel:t,currentExp:s,expToNext:a,showProgress:i=!0,className:r})=>{const n=s/a*100;return e.jsxs(E,{variant:"default",className:clsx("p-4",r),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O.div,{className:"w-12 h-12 bg-contra-gold rounded-full flex items-center justify-center pixel-border",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx("span",{className:"pixel-font text-sm font-bold text-pixel-black",children:t})}),e.jsxs("div",{children:[e.jsxs("div",{className:"pixel-font text-sm text-contra-gold",children:["LEVEL ",t]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:[s,"/",a," EXP"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"RANK"}),e.jsx("div",{className:"pixel-font text-sm text-contra-green",children:Le(t)})]})]}),i&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full bg-pixel-gray rounded-full h-2 overflow-hidden",children:e.jsx(O.div,{className:"h-full bg-gradient-to-r from-contra-gold to-yellow-400 rounded-full",initial:{width:0},animate:{width:`${n}%`},transition:{duration:.5,ease:"easeOut"},children:e.jsx("div",{className:"h-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"PROGRESS"}),e.jsxs("span",{className:"pixel-font text-xs text-contra-gold",children:[Math.round(n),"%"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-pixel-gray",children:[e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray mb-1",children:"NEXT LEVEL"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-white",children:Le(t+1)}),e.jsxs(C,{variant:"secondary",pixelSize:"sm",className:"text-xs",children:[a-s," EXP"]})]})]})]})};function Le(t){return t<=5?"ROOKIE":t<=10?"SOLDIER":t<=20?"VETERAN":t<=30?"ELITE":t<=40?"COMMANDER":"LEGEND"}const $=({label:t,value:s,max:a,variant:i="exp",showPercentage:r=!1,className:n})=>{const l=Math.min(s/a*100,100),d={exp:"bg-contra-gold",health:"bg-red-500",time:"bg-power-up-blue"},o={exp:"EXP",health:"HP",time:"TIME"};return e.jsxs("div",{className:z("space-y-2",n),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:t}),r&&e.jsxs("span",{className:"pixel-font text-xs text-contra-gold",children:[Math.round(l),"%"]})]}),e.jsxs("div",{className:"relative bg-pixel-gray rounded-sm h-3 overflow-hidden",children:[e.jsx("div",{className:z("h-full transition-all duration-500 relative overflow-hidden",d[i]),style:{width:`${l}%`},children:e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:e.jsx("div",{className:"w-full h-full",style:{backgroundImage:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,0.1) 2px, rgba(255,255,255,0.1) 4px)"}})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"pixel-font text-xs text-pixel-white",children:[s,"/",a]}),e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:o[i]})]})]})},Y=({title:t,value:s,icon:a,color:i,trend:r,className:n})=>{const l={gold:"text-contra-gold",green:"text-contra-green",blue:"text-power-up-blue",red:"text-red-500",purple:"text-purple-500"};return e.jsxs(E,{variant:"default",className:z("p-4",n),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:z("text-2xl",l[i]),children:a}),r&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:z("pixel-font text-xs",r.value>0?"text-contra-green":"text-red-500"),children:[r.value>0?"+":"",r.value,"%"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:r.label})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:t}),e.jsx(O.div,{className:z("pixel-font text-2xl font-bold",l[i]),initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20},children:s})]})]})},Os=({title:t,current:s,target:a,unit:i,icon:r,deadline:n,className:l})=>{const d=s>=a;return e.jsxs(E,{variant:"default",className:z("p-4",l),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-contra-gold",children:r}),e.jsx("div",{className:"pixel-font text-sm text-contra-gold",children:t})]}),n&&e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["⏰ ",n]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"pixel-font text-xs text-pixel-white",children:[s," ",i]}),e.jsxs("span",{className:"pixel-font text-xs text-pixel-light-gray",children:["/ ",a," ",i]})]}),e.jsx($,{label:"MISSION PROGRESS",value:s,max:a,variant:"exp",showPercentage:!0}),d&&e.jsx(O.div,{className:"text-center pixel-font text-xs text-contra-green",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:20},children:"✅ MISSION COMPLETE!"})]})]})},Ps=({wordsStudied:t,accuracy:s,timeSpent:a,streak:i,className:r})=>{const n=l=>{const d=Math.floor(l/60),o=l%60;return`${d}:${o.toString().padStart(2,"0")}`};return e.jsxs(E,{variant:"default",className:z("p-4",r),children:[e.jsx("div",{className:"pixel-font text-sm text-contra-gold border-b border-pixel-gray pb-2 mb-3",children:"📋 TODAY'S BATTLE REPORT"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Y,{title:"WORDS DEFEATED",value:t,icon:e.jsx(ge,{size:20}),color:"gold"}),e.jsx(Y,{title:"ACCURACY RATE",value:`${Math.round(s)}%`,icon:e.jsx(_e,{size:20}),color:"green",trend:{value:Math.round(s-75),label:"vs avg"}}),e.jsx(Y,{title:"TIME IN COMBAT",value:n(a),icon:e.jsx(ht,{size:20}),color:"blue"}),e.jsx(Y,{title:"BATTLE STREAK",value:i,icon:"🔥",color:"red"})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-pixel-gray",children:[e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray mb-1",children:"BATTLE STATUS"}),e.jsx("div",{className:"pixel-font text-sm text-contra-green",children:t>=20?"🎯 MISSION ACCOMPLISHED":"⚔️ BATTLE IN PROGRESS"})]})]})},Ls=({achievement:t,size:s="md",showDetails:a=!1,className:i})=>{const r=!!t.unlockedAt,n={sm:"w-16 h-16 text-2xl",md:"w-20 h-20 text-3xl",lg:"w-24 h-24 text-4xl"};return e.jsxs(O.div,{className:clsx("relative",i),whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxs(E,{variant:r?"default":"bordered",className:clsx("flex flex-col items-center justify-center cursor-pointer transition-all duration-300",n[s],!r&&"opacity-50 grayscale"),children:[e.jsx(O.div,{className:clsx("mb-2",r&&"animate-pulse"),animate:r?{rotateY:[0,360]}:{},transition:r?{duration:2,repeat:1/0,repeatDelay:3}:{},children:e.jsx("span",{className:"text-4xl",children:t.icon})}),e.jsx("div",{className:"pixel-font text-xs text-center",children:t.name}),!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"🔒"})}),r&&e.jsx(O.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1.2,1]},transition:{duration:1,ease:"easeOut"},children:e.jsx("div",{className:"w-full h-full rounded-lg bg-gradient-to-r from-yellow-400/30 to-transparent"})})]}),a&&e.jsx(O.div,{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},children:e.jsxs(E,{variant:"default",className:"w-48 p-3",children:[e.jsx("div",{className:"pixel-font text-sm font-bold text-contra-gold mb-1",children:t.name}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray mb-2",children:t.description}),r&&e.jsxs("div",{className:"pixel-font text-xs text-contra-green",children:["Unlocked: ",new Date(t.unlockedAt).toLocaleDateString()]})]})})]})},Ms=({achievements:t,maxToShow:s,className:a})=>{const i=s?t.slice(-s):t,r=t.filter(n=>n.unlockedAt).length;return e.jsxs("div",{className:clsx("space-y-4",a),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"pixel-font text-sm text-contra-gold",children:"🏆 ACHIEVEMENTS"}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:[r,"/",t.length]})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:i.map(n=>e.jsx(Ls,{achievement:n,size:"sm"},n.id))}),s&&t.length>s&&e.jsx("div",{className:"text-center",children:e.jsxs(C,{variant:"secondary",pixelSize:"sm",className:"text-xs",children:["VIEW ALL (",t.length,")"]})})]})},Me=t=>{let s;const a=new Set,i=(x,c)=>{const m=typeof x=="function"?x(s):x;if(!Object.is(m,s)){const f=s;s=c??(typeof m!="object"||m===null)?m:Object.assign({},s,m),a.forEach(w=>w(s,f))}},r=()=>s,o={setState:i,getState:r,getInitialState:()=>u,subscribe:x=>(a.add(x),()=>a.delete(x)),destroy:()=>{a.clear()}},u=s=t(i,r,o);return o},Ws=t=>t?Me(t):Me;var rt={exports:{}},nt={},lt={exports:{}},ct={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X=h;function Us(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var _s=typeof Object.is=="function"?Object.is:Us,Bs=X.useState,zs=X.useEffect,$s=X.useLayoutEffect,Fs=X.useDebugValue;function Vs(t,s){var a=s(),i=Bs({inst:{value:a,getSnapshot:s}}),r=i[0].inst,n=i[1];return $s(function(){r.value=a,r.getSnapshot=s,de(r)&&n({inst:r})},[t,a,s]),zs(function(){return de(r)&&n({inst:r}),t(function(){de(r)&&n({inst:r})})},[t]),Fs(a),a}function de(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!_s(t,a)}catch{return!0}}function qs(t,s){return s()}var Gs=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qs:Vs;ct.useSyncExternalStore=X.useSyncExternalStore!==void 0?X.useSyncExternalStore:Gs;lt.exports=ct;var Hs=lt.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ce=h,Ys=Hs;function Xs(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Qs=typeof Object.is=="function"?Object.is:Xs,Js=Ys.useSyncExternalStore,Ks=ce.useRef,Zs=ce.useEffect,ea=ce.useMemo,ta=ce.useDebugValue;nt.useSyncExternalStoreWithSelector=function(t,s,a,i,r){var n=Ks(null);if(n.current===null){var l={hasValue:!1,value:null};n.current=l}else l=n.current;n=ea(function(){function o(f){if(!u){if(u=!0,x=f,f=i(f),r!==void 0&&l.hasValue){var w=l.value;if(r(w,f))return c=w}return c=f}if(w=c,Qs(x,f))return w;var b=i(f);return r!==void 0&&r(w,b)?(x=f,w):(x=f,c=b)}var u=!1,x,c,m=a===void 0?null:a;return[function(){return o(s())},m===null?void 0:function(){return o(m())}]},[s,a,i,r]);var d=Js(t,n[0],n[1]);return Zs(function(){l.hasValue=!0,l.value=d},[d]),ta(d),d};rt.exports=nt;var sa=rt.exports;const aa=mt(sa),{useDebugValue:ia}=fe,{useSyncExternalStoreWithSelector:ra}=aa;const na=t=>t;function la(t,s=na,a){const i=ra(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,a);return ia(i),i}const We=t=>{const s=typeof t=="function"?Ws(t):t,a=(i,r)=>la(s,i,r);return Object.assign(a,s),a},we=t=>t?We(t):We;class ca{constructor(){W(this,"dbName","VocabularyGame");W(this,"version",1);W(this,"db",null)}async init(){return new Promise((s,a)=>{const i=indexedDB.open(this.dbName,this.version);i.onerror=()=>a(i.error),i.onsuccess=()=>{this.db=i.result,s()},i.onupgradeneeded=r=>{const n=r.target.result;if(n.objectStoreNames.contains("users")||n.createObjectStore("users",{keyPath:"id"}),!n.objectStoreNames.contains("studyRecords")){const l=n.createObjectStore("studyRecords",{keyPath:"id"});l.createIndex("wordId","wordId",{unique:!1}),l.createIndex("userId","userId",{unique:!1})}n.objectStoreNames.contains("testRecords")||n.createObjectStore("testRecords",{keyPath:"id"}),n.objectStoreNames.contains("achievements")||n.createObjectStore("achievements",{keyPath:"id"}),n.objectStoreNames.contains("settings")||n.createObjectStore("settings",{keyPath:"key"})}})}async get(s){return this.db||await this.init(),new Promise((a,i)=>{const l=this.db.transaction(["users"],"readonly").objectStore("users").get(s);l.onsuccess=()=>a(l.result||null),l.onerror=()=>i(l.error)})}async set(s,a){return this.db||await this.init(),new Promise((i,r)=>{const d=this.db.transaction(["users"],"readwrite").objectStore("users").put({id:s,data:a});d.onsuccess=()=>i(),d.onerror=()=>r(d.error)})}async remove(s){return this.db||await this.init(),new Promise((a,i)=>{const l=this.db.transaction(["users"],"readwrite").objectStore("users").delete(s);l.onsuccess=()=>a(),l.onerror=()=>i(l.error)})}async clear(){return this.db||await this.init(),new Promise((s,a)=>{const n=this.db.transaction(["users"],"readwrite").objectStore("users").clear();n.onsuccess=()=>s(),n.onerror=()=>a(n.error)})}async saveStudyRecord(s){return this.db||await this.init(),new Promise((a,i)=>{const l=this.db.transaction(["studyRecords"],"readwrite").objectStore("studyRecords").put(s);l.onsuccess=()=>a(),l.onerror=()=>i(l.error)})}async getStudyRecords(){return this.db||await this.init(),new Promise((s,a)=>{const n=this.db.transaction(["studyRecords"],"readonly").objectStore("studyRecords").getAll();n.onsuccess=()=>s(n.result||[]),n.onerror=()=>a(n.error)})}async getStudyRecordsByWord(s){return this.db||await this.init(),new Promise((a,i)=>{const d=this.db.transaction(["studyRecords"],"readonly").objectStore("studyRecords").index("wordId").getAll(s);d.onsuccess=()=>a(d.result||[]),d.onerror=()=>i(d.error)})}async getStudyRecordsByUser(s){return this.db||await this.init(),new Promise((a,i)=>{const d=this.db.transaction(["studyRecords"],"readonly").objectStore("studyRecords").index("userId").getAll(s);d.onsuccess=()=>a(d.result||[]),d.onerror=()=>i(d.error)})}async saveTestResult(s){return this.db||await this.init(),new Promise((a,i)=>{const l=this.db.transaction(["testRecords"],"readwrite").objectStore("testRecords").put(s);l.onsuccess=()=>a(),l.onerror=()=>i(l.error)})}async getTestResults(s){return this.db||await this.init(),new Promise((a,i)=>{const l=this.db.transaction(["testRecords"],"readonly").objectStore("testRecords").getAll();l.onsuccess=()=>{const d=l.result||[];a(d.filter(o=>o.id.includes(s)))},l.onerror=()=>i(l.error)})}}class oa{async get(s){try{const a=localStorage.getItem(s);return a?JSON.parse(a):null}catch(a){return console.warn("localStorage get error:",a),null}}async set(s,a){try{localStorage.setItem(s,JSON.stringify(a))}catch(i){throw console.warn("localStorage set error:",i),i}}async remove(s){try{localStorage.removeItem(s)}catch(a){console.warn("localStorage remove error:",a)}}async clear(){try{localStorage.clear()}catch(s){console.warn("localStorage clear error:",s)}}async saveStudyRecord(s){const a=await this.get("studyRecords")||[],i=a.findIndex(r=>r.id===s.id);i>=0?a[i]=s:a.push(s),await this.set("studyRecords",a)}async getStudyRecords(){return await this.get("studyRecords")||[]}async getStudyRecordsByWord(s){return(await this.getStudyRecords()).filter(i=>i.wordId===s)}async getStudyRecordsByUser(s){return(await this.getStudyRecords()).filter(i=>i.userId===s)}async saveTestResult(s){const a=await this.get("testRecords")||[];a.push(s),await this.set("testRecords",a)}async getTestResults(s){return(await this.get("testRecords")||[]).filter(i=>i.id.includes(s))}}class da{constructor(){W(this,"adapter");W(this,"MAX_STORAGE_SIZE",50*1024*1024);W(this,"WARNING_THRESHOLD",.8);this.adapter=this.isIndexedDBSupported()?new ca:new oa}isIndexedDBSupported(){try{return"indexedDB"in window&&indexedDB!==null}catch{return!1}}async get(s){return await this.adapter.get(s)}async set(s,a){await this.adapter.set(s,a)}async remove(s){await this.adapter.remove(s)}async clear(){await this.adapter.clear()}async saveUserData(s){await this.adapter.set("user",s)}async getUserData(){return await this.adapter.get("user")}async saveStudyRecord(s){await this.adapter.saveStudyRecord(s)}async getStudyRecords(){return await this.adapter.getStudyRecords()}async getStudyRecordsByWord(s){return await this.adapter.getStudyRecordsByWord(s)}async getStudyRecordsByUser(s){return await this.adapter.getStudyRecordsByUser(s)}async getStudyRecord(s,a){return(await this.getStudyRecordsByUser(a)).find(r=>r.wordId===s)||null}async saveTestResult(s){await this.adapter.saveTestResult(s)}async getTestResults(s){return await this.adapter.getTestResults(s)}async saveSetting(s,a){await this.adapter.set(`setting_${s}`,a)}async getSetting(s,a){const i=await this.adapter.get(`setting_${s}`);return i!==null?i:a}async exportData(){const s=await this.getUserData(),a=await this.getStudyRecords(),i=s?await this.getTestResults(s.id):[],r={user:s,studyRecords:a.reduce((n,l)=>(n[l.id]=l,n),{}),testResults:i,achievements:[],exportedAt:new Date().toISOString()};return JSON.stringify(r,null,2)}async importData(s){try{const a=JSON.parse(s);if(a.user&&await this.saveUserData(a.user),a.studyRecords)for(const i of Object.values(a.studyRecords))await this.saveStudyRecord(i);if(a.testResults)for(const i of a.testResults)await this.saveTestResult(i);console.log("Data imported successfully")}catch(a){throw console.error("Failed to import data:",a),a}}async checkStorageQuota(){if("storage"in navigator&&"estimate"in navigator.storage){const a=await navigator.storage.estimate();return{used:a.usage||0,total:a.quota||this.MAX_STORAGE_SIZE,percentage:(a.usage||0)/(a.quota||this.MAX_STORAGE_SIZE)*100}}const s=await this.estimateLocalStorageSize();return{used:s,total:this.MAX_STORAGE_SIZE,percentage:s/this.MAX_STORAGE_SIZE*100}}async estimateLocalStorageSize(){let s=0;for(let a in localStorage)localStorage.hasOwnProperty(a)&&(s+=localStorage[a].length+a.length);return s*2}async cleanupOldData(){if((await this.checkStorageQuota()).percentage>this.WARNING_THRESHOLD){console.warn("Storage usage is high, cleaning up old data...");const a=await this.getUserData();if(a){const i=await this.getTestResults(a.id);if(i.length>100){const r=i.slice(-100);await this.adapter.remove("testRecords");for(const n of r)await this.saveTestResult(n)}}}}async isDataAvailable(){return await this.getUserData()!==null}async resetData(){await this.clear(),console.log("All data has been reset")}}const D=new da,U=we((t,s)=>({user:null,isInitialized:!1,isLoading:!1,error:null,initializeUser:async a=>{t({isLoading:!0,error:null});try{let i=await D.getUserData();i?(i.lastActiveAt=new Date().toISOString(),await D.saveUserData(i)):(i={id:crypto.randomUUID(),username:a,level:1,experience:0,streak:0,achievements:[],statistics:{totalWordsStudied:0,totalStudyTime:0,averageAccuracy:0,dailyGoalStreak:0,testResults:[]},settings:{dailyGoal:20,studyReminder:!0,reminderTime:"20:00",difficulty:"medium",soundEnabled:!0,darkMode:!1,autoPlayAudio:!1,studyMode:"mixed"},createdAt:new Date().toISOString(),lastActiveAt:new Date().toISOString()},await D.saveUserData(i)),t({user:i,isInitialized:!0,isLoading:!1}),s().checkAchievements()}catch(i){console.error("Failed to initialize user:",i),t({error:"Failed to initialize user data",isLoading:!1})}},updateUser:async a=>{const{user:i}=s();if(i)try{const r={...i,...a};await D.saveUserData(r),t({user:r})}catch(r){console.error("Failed to update user:",r),t({error:"Failed to update user data"})}},addExperience:a=>{const{user:i}=s();if(!i)return;const r=i.experience+a,n=Math.floor(r/1e3)+1,l={...i,experience:r,level:n};D.saveUserData(l),t({user:l}),n>i.level&&s().checkLevelAchievements(n)},updateLevel:a=>{const{user:i}=s();if(!i)return;const r={...i,level:a};D.saveUserData(r),t({user:r})},updateStreak:()=>{const{user:a}=s();if(!a)return;const i=new Date().toDateString(),r=new Date(a.lastActiveAt).toDateString(),n=new Date(Date.now()-864e5).toDateString();let l=a.streak;r===n?l+=1:r!==i&&(l=1);const d={...a,streak:l,lastActiveAt:new Date().toISOString()};D.saveUserData(d),t({user:d})},addAchievement:a=>{const{user:i}=s();if(!i||i.achievements.includes(a))return;const r={...i,achievements:[...i.achievements,a]};D.saveUserData(r),t({user:r})},updateSettings:async a=>{const{user:i}=s();if(i)try{const r={...i,settings:{...i.settings,...a}};await D.saveUserData(r),t({user:r})}catch(r){console.error("Failed to update settings:",r),t({error:"Failed to update settings"})}},checkLevelAchievements:a=>{[{level:5,id:"first_milestone"},{level:10,id:"dedicated_learner"},{level:20,id:"vocabulary_expert"},{level:30,id:"word_master"},{level:50,id:"ielts_legend"}].forEach(r=>{a>=r.level&&s().addAchievement(r.id)})},checkAchievements:()=>{const{user:a}=s();if(!a)return;[{streak:7,id:"week_warrior"},{streak:30,id:"monthly_champion"},{streak:100,id:"century_club"}].forEach(n=>{a.streak>=n.streak&&s().addAchievement(n.id)}),[{words:50,id:"half_century"},{words:100,id:"century"},{words:500,id:"vocabulary_collector"},{words:1e3,id:"word_conqueror"}].forEach(n=>{a.statistics.totalWordsStudied>=n.words&&s().addAchievement(n.id)})},logout:()=>{t({user:null,isInitialized:!1})},resetProgress:async()=>{const{user:a}=s();if(a)try{const i={...a,level:1,experience:0,streak:0,achievements:[],statistics:{totalWordsStudied:0,totalStudyTime:0,averageAccuracy:0,dailyGoalStreak:0,testResults:[]},lastActiveAt:new Date().toISOString()};await D.saveUserData(i),await D.remove("studyRecords"),await D.remove("testRecords"),t({user:i})}catch(i){console.error("Failed to reset progress:",i),t({error:"Failed to reset progress"})}}})),xa=[{id:"1",word:"abandon",pronunciation:"/əˈbændən/",definitions:[{partOfSpeech:"verb",meaning:"to give up completely",examples:["He abandoned his plan to travel abroad.","The captain abandoned the sinking ship."],synonyms:["desert","forsake","quit"],antonyms:["continue","maintain","keep"]}],difficulty:4,frequency:85,tags:["common","academic"]},{id:"2",word:"ability",pronunciation:"/əˈbɪlɪti/",definitions:[{partOfSpeech:"noun",meaning:"the physical or mental power or skill needed to do something",examples:["She has the ability to make people feel at ease.","He showed remarkable ability in mathematics."],synonyms:["capability","capacity","skill"],antonyms:["inability","incapacity"]}],difficulty:3,frequency:92,tags:["common","academic"]},{id:"3",word:"academic",pronunciation:"/ˌækəˈdemɪk/",definitions:[{partOfSpeech:"adjective",meaning:"relating to education and scholarship",examples:["The university has high academic standards.","She is pursuing an academic career."],synonyms:["educational","scholarly","intellectual"],antonyms:["practical","vocational"]},{partOfSpeech:"noun",meaning:"a teacher or scholar in a university or institute of higher education",examples:["The conference was attended by leading academics from around the world."]}],difficulty:5,frequency:78,tags:["academic","education"]},{id:"4",word:"access",pronunciation:"/ˈækses/",definitions:[{partOfSpeech:"noun",meaning:"the means or opportunity to approach or enter a place",examples:["The building provides wheelchair access.","We need access to the database."],synonyms:["entry","admission","approach"]},{partOfSpeech:"verb",meaning:"to obtain, examine, or retrieve data",examples:["You can access your email from anywhere.","The system allows users to access files remotely."]}],difficulty:4,frequency:88,tags:["common","technology","academic"]},{id:"5",word:"accommodate",pronunciation:"/əˈkɒmədeɪt/",definitions:[{partOfSpeech:"verb",meaning:"to provide lodging or sufficient space for someone",examples:["The hotel can accommodate up to 500 guests.","The new building can accommodate more students."],synonyms:["house","lodge","fit"]},{partOfSpeech:"verb",meaning:"to adapt or adjust to meet a need",examples:["The company can accommodate special dietary requirements.","We need to accommodate their schedule."]}],difficulty:6,frequency:72,tags:["academic","formal"]}],ua=[{id:"6",word:"analyze",pronunciation:"/ˈænəlaɪz/",definitions:[{partOfSpeech:"verb",meaning:"to examine methodically and in detail",examples:["Scientists analyze data to draw conclusions.","Students are asked to analyze the poem's structure."],synonyms:["examine","investigate","study"],antonyms:["synthesize","ignore"]}],difficulty:5,frequency:85,tags:["academic","science","analysis"]},{id:"7",word:"concept",pronunciation:"/ˈkɒnsept/",definitions:[{partOfSpeech:"noun",meaning:"an abstract idea or general notion",examples:["The concept of time is difficult to explain.","She introduced the concept of sustainable development."],synonyms:["idea","notion","conception"],antonyms:["reality","fact"]}],difficulty:4,frequency:80,tags:["academic","philosophy","theory"]},{id:"8",word:"context",pronunciation:"/ˈkɒntekst/",definitions:[{partOfSpeech:"noun",meaning:"the circumstances that form the setting for an event",examples:["You need to understand the historical context.","The quote was taken out of context."],synonyms:["background","situation","circumstances"]}],difficulty:5,frequency:82,tags:["academic","language","analysis"]}],ma=[{id:"9",word:"adventure",pronunciation:"/ədˈventʃər/",definitions:[{partOfSpeech:"noun",meaning:"an unusual and exciting experience or activity",examples:["Traveling alone is quite an adventure.","The book tells of their adventures in Africa."],synonyms:["expedition","quest","venture"],antonyms:["routine","boredom"]},{partOfSpeech:"verb",meaning:"to engage in hazardous or exciting activities",examples:["They adventured into the jungle.","She likes to adventure in her spare time."]}],difficulty:4,frequency:68,tags:["general","travel","lifestyle"]},{id:"10",word:"benefit",pronunciation:"/ˈbenɪfɪt/",definitions:[{partOfSpeech:"noun",meaning:"an advantage or profit gained from something",examples:["The benefits of exercise are well-known.","What are the benefits of this approach?"],synonyms:["advantage","profit","gain"],antonyms:["disadvantage","drawback"]},{partOfSpeech:"verb",meaning:"to receive an advantage; to help or improve",examples:["Many people benefit from the new law.","The economy will benefit from these changes."]}],difficulty:3,frequency:90,tags:["common","business","general"]}];class ha{constructor(){W(this,"cache",new Map);W(this,"loaded",!1);W(this,"searchIndex",new Map)}async loadVocabularyData(){if(!this.loaded)try{this.cache.set("core",xa),this.cache.set("academic",ua),this.cache.set("general",ma),this.buildSearchIndex(),this.loaded=!0,console.log("Vocabulary data loaded successfully")}catch(s){console.error("Failed to load vocabulary data:",s),this.cache.set("core",this.getMinimalVocabulary()),this.buildSearchIndex(),this.loaded=!0}}buildSearchIndex(){this.searchIndex.clear(),Array.from(this.cache.values()).flat().forEach(a=>{this.addToIndex(a.word.toLowerCase(),a.id),this.addToIndex(a.pronunciation.toLowerCase(),a.id),a.definitions.forEach(i=>{var r,n;this.addToIndex(i.meaning.toLowerCase(),a.id),this.addToIndex(i.partOfSpeech.toLowerCase(),a.id),i.examples.forEach(l=>{this.addToIndex(l.toLowerCase(),a.id)}),(r=i.synonyms)==null||r.forEach(l=>{this.addToIndex(l.toLowerCase(),a.id)}),(n=i.antonyms)==null||n.forEach(l=>{this.addToIndex(l.toLowerCase(),a.id)})}),a.tags.forEach(i=>{this.addToIndex(i.toLowerCase(),a.id)})})}addToIndex(s,a){this.searchIndex.has(s)||this.searchIndex.set(s,new Set),this.searchIndex.get(s).add(a)}getMinimalVocabulary(){return[{id:"1",word:"abandon",pronunciation:"/əˈbændən/",definitions:[{partOfSpeech:"verb",meaning:"to give up completely",examples:["He abandoned his plan."]}],difficulty:4,frequency:85,tags:["common"]}]}getWordsByCategory(s){return this.cache.get(s)||[]}getAllWords(){return Array.from(this.cache.values()).flat()}getWordsByLevel(s){const a=this.getAllWords(),i=Math.min(s+2,10),r=Math.max(s-1,1);return a.filter(n=>n.difficulty>=r&&n.difficulty<=i)}getWordsByDifficulty(s,a){return this.getAllWords().filter(r=>r.difficulty>=s&&r.difficulty<=a)}searchWords(s,a,i=20){const r=this.getAllWords(),n=s.toLowerCase();let l=r;if(a){if(a.difficulty){const[o,u]=a.difficulty;l=l.filter(x=>x.difficulty>=o&&x.difficulty<=u)}a.tags&&a.tags.length>0&&(l=l.filter(o=>o.tags.some(u=>a.tags.includes(u)))),a.category&&(l=l.filter(o=>{var u;return(u=this.cache.get(a.category))==null?void 0:u.some(x=>x.id===o.id)}))}const d=[];return l.forEach(o=>{let u=0;const x=[];o.word.toLowerCase()===n?(u+=100,x.push("word")):o.word.toLowerCase().includes(n)&&(u+=50,x.push("word")),o.pronunciation.toLowerCase().includes(n)&&(u+=30,x.push("pronunciation")),o.definitions.forEach(c=>{var m;c.meaning.toLowerCase().includes(n)&&(u+=20,x.push("meaning")),c.examples.forEach(f=>{f.toLowerCase().includes(n)&&(u+=15,x.push("example"))}),(m=c.synonyms)==null||m.forEach(f=>{f.toLowerCase()===n&&(u+=25,x.push("synonym"))})}),o.tags.forEach(c=>{c.toLowerCase().includes(n)&&(u+=10,x.push("tag"))}),u>0&&d.push({word:o,relevance:u,matchedFields:[...new Set(x)]})}),d.sort((o,u)=>u.relevance-o.relevance).slice(0,i)}getRandomWords(s,a){let i=this.getAllWords();if(a){if(a.difficulty){const[n,l]=a.difficulty;i=i.filter(d=>d.difficulty>=n&&d.difficulty<=l)}a.tags&&a.tags.length>0&&(i=i.filter(n=>n.tags.some(l=>a.tags.includes(l))))}return[...i].sort(()=>Math.random()-.5).slice(0,Math.min(s,i.length))}getWordsForReview(s,a,i=50){const r=this.getAllWords(),n=new Date;return r.filter(d=>{const o=a.find(x=>x.wordId===d.id);return o?new Date(o.nextReviewAt)<=n:!0}).sort((d,o)=>{const u=a.find(f=>f.wordId===d.id),x=a.find(f=>f.wordId===o.id),c=(u==null?void 0:u.masteryLevel)||0,m=(x==null?void 0:x.masteryLevel)||0;return c-m}).slice(0,i)}getStatistics(){const s=this.getAllWords(),a={},i={};s.forEach(n=>{this.cache.forEach((l,d)=>{l.some(o=>o.id===n.id)&&(a[d]=(a[d]||0)+1)}),i[n.difficulty]=(i[n.difficulty]||0)+1});const r=s.reduce((n,l)=>n+l.difficulty,0)/s.length;return{totalWords:s.length,byCategory:a,byDifficulty:i,averageDifficulty:Math.round(r*100)/100}}getWordById(s){return this.getAllWords().find(i=>i.id===s)}getSimilarWords(s,a=5){const i=this.getWordById(s);if(!i)return[];const r=this.getAllWords().filter(l=>l.id!==s),n=[];return r.forEach(l=>{let d=0;Math.abs(l.difficulty-i.difficulty)<=1&&(d+=20);const o=l.tags.filter(m=>i.tags.includes(m));d+=o.length*15,Math.abs(l.word.length-i.word.length)<=2&&(d+=10);const u=i.definitions.map(m=>m.partOfSpeech),x=l.definitions.map(m=>m.partOfSpeech),c=u.filter(m=>x.includes(m));d+=c.length*10,d>0&&n.push({word:l,score:d})}),n.sort((l,d)=>d.score-l.score).slice(0,a).map(l=>l.word)}isLoaded(){return this.loaded}async refreshData(){this.loaded=!1,await this.loadVocabularyData()}}const V=new ha;class pa{constructor(){W(this,"baseIntervals",[1,4,24,72,168,720,2880])}calculateNextReview(s,a,i){const r=Math.min(a-1,this.baseIntervals.length-1);let n=this.baseIntervals[r];const l=s/100,u=n*(.5+l*1.5)*(i?1:.5);return new Date(Date.now()+u*60*60*1e3)}calculateMasteryLevel(s,a,i){if(i){const r=(100-s)*.3;return Math.min(s+r,100)}else{const r=s*.3;return Math.max(s-r,0)}}getWordsForSession(s,a,i){return[]}}const xe=new pa,G=we((t,s)=>({currentSession:null,todayProgress:{date:new Date().toDateString(),target:20,completed:0,newWords:0,reviewWords:0,accuracy:0,timeSpent:0},isSessionActive:!1,isLoading:!1,error:null,startSession:a=>{const{user:i}=useUserStore.getState();if(!i)return;const r={id:crypto.randomUUID(),userId:i.id,startTime:Date.now(),wordsStudied:[],totalCorrect:0,totalTime:0,sessionType:a};t({currentSession:r,isSessionActive:!0,error:null})},endSession:()=>{const{currentSession:a}=s();if(!a)return;const i=Date.now()-a.startTime,r=a.wordsStudied.length*10+a.totalCorrect*5;useUserStore.getState().addExperience(r);const{user:n}=useUserStore.getState();if(n){const l={...n.statistics,totalWordsStudied:n.statistics.totalWordsStudied+a.wordsStudied.length,totalStudyTime:n.statistics.totalStudyTime+i};useUserStore.getState().updateUser({statistics:l})}t({currentSession:null,isSessionActive:!1}),s().getTodayProgress()},recordWordStudy:async(a,i)=>{const{currentSession:r}=s(),{user:n}=useUserStore.getState();if(!(!r||!n))try{let l=await D.getStudyRecord(a,n.id);if(l){const u=xe.calculateMasteryLevel(l.masteryLevel,l.reviewCount,i.isCorrect);l={...l,masteryLevel:u,reviewCount:l.reviewCount+1,correctCount:l.correctCount+(i.isCorrect?1:0),lastReviewAt:new Date().toISOString(),nextReviewAt:xe.calculateNextReview(u,l.reviewCount+1,i.isCorrect).toISOString(),studyTime:l.studyTime+i.timeSpent}}else l={id:crypto.randomUUID(),wordId:a,userId:n.id,masteryLevel:i.isCorrect?25:5,reviewCount:1,correctCount:i.isCorrect?1:0,lastReviewAt:new Date().toISOString(),nextReviewAt:xe.calculateNextReview(i.isCorrect?25:5,1,i.isCorrect).toISOString(),studyTime:i.timeSpent,createdAt:new Date().toISOString()};await D.saveStudyRecord(l);const d={...r,wordsStudied:[...r.wordsStudied,a],totalCorrect:r.totalCorrect+(i.isCorrect?1:0),totalTime:r.totalTime+i.timeSpent};t({currentSession:d});const o=i.isCorrect?10:5;useUserStore.getState().addExperience(o),s().getTodayProgress()}catch(l){console.error("Failed to record word study:",l),t({error:"Failed to record study progress"})}},getTodayProgress:async()=>{const{user:a}=useUserStore.getState();if(a)try{const i=await D.getStudyRecordsByUser(a.id),r=new Date().toDateString(),n=i.filter(m=>new Date(m.lastReviewAt).toDateString()===r),l=n.filter(m=>m.reviewCount===1).length,d=n.filter(m=>m.reviewCount>1).length,o=n.reduce((m,f)=>m+f.correctCount,0),u=n.reduce((m,f)=>m+f.reviewCount,0),x=n.reduce((m,f)=>m+f.studyTime,0),c={date:r,target:a.settings.dailyGoal,completed:n.length,newWords:l,reviewWords:d,accuracy:u>0?o/u*100:0,timeSpent:Math.floor(x/1e3)};t({todayProgress:c})}catch(i){console.error("Failed to get today's progress:",i),t({error:"Failed to load progress data"})}},getReviewWords:async()=>{const{user:a}=useUserStore.getState();if(!a)return[];try{await V.loadVocabularyData();const i=await D.getStudyRecordsByUser(a.id),r=new Date,n=i.filter(o=>new Date(o.nextReviewAt)<=r),l=V.getAllWords();return n.map(o=>l.find(u=>u.id===o.wordId)).filter(Boolean).sort((o,u)=>{const x=i.find(m=>m.wordId===o.id),c=i.find(m=>m.wordId===u.id);return((x==null?void 0:x.masteryLevel)||0)-((c==null?void 0:c.masteryLevel)||0)}).slice(0,50)}catch(i){return console.error("Failed to get review words:",i),t({error:"Failed to load review words"}),[]}},getStudyHistory:async(a=50)=>{const{user:i}=useUserStore.getState();if(!i)return[];try{return(await D.getStudyRecordsByUser(i.id)).sort((n,l)=>new Date(l.lastReviewAt).getTime()-new Date(n.lastReviewAt).getTime()).slice(0,a)}catch(r){return console.error("Failed to get study history:",r),t({error:"Failed to load study history"}),[]}},getMasteryLevel:async a=>{const{user:i}=useUserStore.getState();if(!i)return 0;try{const r=await D.getStudyRecord(a,i.id);return(r==null?void 0:r.masteryLevel)||0}catch(r){return console.error("Failed to get mastery level:",r),0}},pauseSession:()=>{const{currentSession:a}=s();a&&t({isSessionActive:!1})},resumeSession:()=>{t({isSessionActive:!0})},clearError:()=>{t({error:null})}})),Z=({title:t,subtitle:s,icon:a,route:i,variant:r})=>{const n=Ne();return e.jsx(O.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(E,{variant:"default",className:"p-4 cursor-pointer h-full hover:shadow-lg transition-all duration-200",onClick:()=>n(i),children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"text-3xl",children:a}),e.jsx("div",{className:"pixel-font text-sm text-contra-gold",children:t}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:s}),e.jsx(C,{variant:r,pixelSize:"sm",className:"w-full",children:"ENTER"})]})})})},fa=()=>{const{user:t}=U(),{todayProgress:s,getTodayProgress:a}=G(),i=Ne();return fe.useEffect(()=>{a()},[a]),t?e.jsxs("div",{className:"min-h-screen bg-pixel-black crt-effect",children:[e.jsx("div",{className:"bg-pixel-gray border-b-2 border-contra-gold p-4",children:e.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-2xl",children:"🎮"}),e.jsxs("div",{children:[e.jsx("h1",{className:"pixel-font text-lg text-contra-gold",children:"COMMAND CENTER"}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["OPERATOR: ",t.username.toUpperCase()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Pe,{currentLevel:t.level,currentExp:t.experience%1e3,expToNext:1e3,showProgress:!1,className:"hidden md:block"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"pixel-font text-xs text-contra-green",children:["🔥 STREAK: ",t.streak]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["📅 ",new Date().toLocaleDateString()]})]})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(E,{variant:"default",className:"mb-6 p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"pixel-font text-lg text-contra-gold",children:"🎯 MISSION BRIEFING"}),e.jsxs("div",{className:"pixel-font text-sm text-pixel-white",children:["OBJECTIVE: MASTER ",s.target-s.completed," MORE VOCABULARY TARGETS"]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["INTELLIGENCE REPORTS SHOW ENEMY WORDS IN THE AREA.",e.jsx("br",{}),"ELIMINATE THEM TO GAIN EXPERIENCE POINTS."]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx(Z,{title:"TRAINING CAMP",subtitle:"Learn New Words",icon:"🏕️",route:"/study",variant:"primary"}),e.jsx(Z,{title:"COMBAT ZONE",subtitle:"Test Your Skills",icon:"⚔️",route:"/test",variant:"danger"}),e.jsx(Z,{title:"INTEL REPORT",subtitle:"View Progress",icon:"📊",route:"/progress",variant:"secondary"}),e.jsx(Z,{title:"ARMORY",subtitle:"Settings & Tools",icon:"🛠️",route:"/settings",variant:"secondary"}),e.jsx(Z,{title:"ACHIEVEMENTS",subtitle:"View Awards",icon:"🏆",route:"/achievements",variant:"power-up"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx(Ps,{wordsStudied:s.completed,accuracy:s.accuracy,timeSpent:s.timeSpent,streak:t.streak}),e.jsx(Os,{title:"DAILY OBJECTIVE",current:s.completed,target:s.target,unit:"words",icon:"🎯",deadline:"23:59"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx(Pe,{currentLevel:t.level,currentExp:t.experience%1e3,expToNext:1e3}),e.jsx(Y,{title:"TOTAL ELIMINATED",value:t.statistics.totalWordsStudied,icon:"🏆",color:"gold",trend:{value:12,label:"this week"}}),e.jsx(Y,{title:"MISSION SUCCESS RATE",value:`${Math.round(t.statistics.averageAccuracy)}%`,icon:"📈",color:"green",trend:{value:5,label:"improvement"}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ms,{achievements:[{id:"first_word",name:"First Victory",description:"Learn your first word",icon:"🎯",unlockedAt:t.createdAt},{id:"streak_warrior",name:"Streak Warrior",description:"7 day learning streak",icon:"🔥",unlockedAt:t.streak>=7?t.lastActiveAt:void 0},{id:"level_10",name:"Elite Soldier",description:"Reach level 10",icon:"⭐",unlockedAt:t.level>=10?t.lastActiveAt:void 0},{id:"perfect_score",name:"Perfect Mission",description:"100% test accuracy",icon:"💯",unlockedAt:void 0}],maxToShow:4}),e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsx("div",{className:"pixel-font text-sm text-contra-gold border-b border-pixel-gray pb-2 mb-3",children:"📊 QUICK STATS"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"MISSIONS COMPLETED:"}),e.jsx("span",{className:"pixel-font text-sm text-pixel-white",children:t.statistics.testResults.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"BATTLE TIME:"}),e.jsxs("span",{className:"pixel-font text-sm text-power-up-blue",children:[Math.floor(t.statistics.totalStudyTime/36e5),"h ",Math.floor(t.statistics.totalStudyTime%36e5/6e4),"m"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"ACHIEVEMENTS:"}),e.jsx("span",{className:"pixel-font text-sm text-contra-gold",children:t.achievements.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"RANK:"}),e.jsx("span",{className:"pixel-font text-sm text-contra-green",children:ga(t.level)})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-pixel-gray",children:e.jsx(C,{variant:"secondary",pixelSize:"sm",className:"w-full",onClick:()=>i("/progress"),children:"VIEW DETAILED REPORTS"})})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect flex items-center justify-center",children:e.jsx(E,{variant:"default",className:"p-8 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"pixel-font text-2xl text-contra-gold mb-6",children:"🎮 IELTS VOCABULARY GAME"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray mb-6",children:"Enter your callsign to begin your mission"}),e.jsx("input",{type:"text",placeholder:"Enter your name...",className:"w-full p-3 bg-pixel-gray text-pixel-white pixel-font text-sm border-2 border-contra-gold rounded mb-4",onKeyPress:r=>{if(r.key==="Enter"){const n=r.target.value.trim();n&&U.getState().initializeUser(n)}}}),e.jsx(C,{variant:"primary",className:"w-full",onClick:()=>{const r=document.querySelector("input"),n=r==null?void 0:r.value.trim();n&&U.getState().initializeUser(n)},children:"START MISSION"})]})})})};function ga(t){return t<=5?"ROOKIE":t<=10?"SOLDIER":t<=20?"VETERAN":t<=30?"ELITE":t<=40?"COMMANDER":"LEGEND"}class ya{constructor(){W(this,"synth");W(this,"voices",[]);this.synth=window.speechSynthesis,this.loadVoices(),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=()=>this.loadVoices())}loadVoices(){this.voices=this.synth.getVoices()}speak(s,a={}){this.synth.cancel();const i=new SpeechSynthesisUtterance(s),r=this.voices.filter(n=>n.lang.startsWith("en"));r.length>0&&(i.voice=r[0]),i.rate=a.rate||.8,i.pitch=a.pitch||1,i.lang=a.lang||"en-US",this.synth.speak(i)}stop(){this.synth.cancel()}}class va{constructor(){W(this,"isMuted",!1);this.loadSettings()}loadSettings(){const s=localStorage.getItem("audioSettings");if(s){const a=JSON.parse(s);this.isMuted=a.isMuted||!1}}saveSettings(){localStorage.setItem("audioSettings",JSON.stringify({isMuted:this.isMuted}))}async playAudio(s,a=1){if(!this.isMuted)try{const i=new Audio(s);i.volume=a,i.currentTime=0,await i.play()}catch(i){console.warn("Audio playback failed:",i)}}playSuccessSound(){this.playAudio("/audio/success.mp3",.3)}playErrorSound(){this.playAudio("/audio/error.mp3",.3)}playLevelUpSound(){this.playAudio("/audio/levelup.mp3",.5)}toggleMute(){return this.isMuted=!this.isMuted,this.saveSettings(),this.isMuted}get muted(){return this.isMuted}}const ja=new ya,Na=new va,wa=({word:t,onResult:s,showAnswer:a=!1})=>{const[i,r]=h.useState(a),[n]=h.useState(Date.now()),[l,d]=h.useState(""),o=()=>{t.audioUrl?new Audio(t.audioUrl).play().catch(console.error):ja.speak(t.word)},u=x=>{const c=Date.now()-n;s({wordId:t.id,isCorrect:x,timeSpent:c,userAnswer:l,timestamp:new Date().toISOString()})};return e.jsx("div",{className:"relative w-full max-w-md mx-auto",children:e.jsx(O.div,{className:"card-container",style:{perspective:1e3},initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},children:e.jsxs(O.div,{className:"card relative w-full h-96 cursor-pointer",animate:{rotateY:i?180:0},transition:{duration:.6},style:{transformStyle:"preserve-3d"},onClick:()=>r(!i),children:[e.jsxs("div",{className:"card-face card-front absolute w-full h-full bg-gradient-to-br from-blue-600 to-purple-700 rounded-xl shadow-lg p-6 flex flex-col items-center justify-center text-white",children:[e.jsx("div",{className:"text-4xl font-bold mb-4 pixel-font",children:t.word}),e.jsx("div",{className:"text-lg opacity-80 mb-6 pixel-font",children:t.pronunciation}),e.jsxs("button",{onClick:x=>{x.stopPropagation(),o()},className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors mb-6",children:[e.jsx(ue,{size:20}),e.jsx("span",{className:"pixel-font text-sm",children:"PLAY SOUND"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"pixel-font text-xs text-yellow-300 mb-2",children:["DIFFICULTY: ","⭐".repeat(Math.min(t.difficulty,5))]}),e.jsx("div",{className:"pixel-font text-xs opacity-60",children:"CLICK TO REVEAL MEANING"})]})]}),e.jsxs("div",{className:"card-face card-back absolute w-full h-full bg-gradient-to-br from-green-600 to-teal-700 rounded-xl shadow-lg p-6 text-white",children:[e.jsx("div",{className:"text-2xl font-bold mb-4 pixel-font",children:t.word}),e.jsx("div",{className:"space-y-3 mb-6 max-h-48 overflow-y-auto",children:t.definitions.map((x,c)=>e.jsxs("div",{className:"bg-white/20 rounded-lg p-3",children:[e.jsx("div",{className:"pixel-font text-sm font-semibold text-yellow-200 mb-1",children:x.partOfSpeech.toUpperCase()}),e.jsx("div",{className:"pixel-font text-base mb-2",children:x.meaning}),x.examples.length>0&&e.jsxs("div",{className:"pixel-font text-xs opacity-80 italic",children:['💡 "',x.examples[0],'"']})]},c))}),e.jsxs("div",{className:"flex gap-2 absolute bottom-4 left-6 right-6",children:[e.jsxs("button",{onClick:x=>{x.stopPropagation(),u(!1)},className:"flex-1 bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors pixel-font text-sm",children:[e.jsx(pt,{size:20}),e.jsx("span",{children:"NEED PRACTICE"})]}),e.jsxs("button",{onClick:x=>{x.stopPropagation(),u(!0)},className:"flex-1 bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors pixel-font text-sm",children:[e.jsx(ft,{size:20}),e.jsx("span",{children:"MASTERED"})]})]})]})]})})})},ba=()=>{const[t,s]=h.useState(null),[a,i]=h.useState(!1),[r,n]=h.useState("learn"),[l,d]=h.useState(0),[o,u]=h.useState([]),[x,c]=h.useState(!1),[m,f]=h.useState([]),{startSession:w,endSession:b,recordWordStudy:y,todayProgress:g}=G(),{user:S}=U();h.useEffect(()=>{a&&o.length===0&&j()},[a,r]);const j=async()=>{await V.loadVocabularyData();let v;r==="review"?v=await G.getState().getReviewWords():(v=V.getWordsByLevel((S==null?void 0:S.level)||1),v=v.slice(0,Math.min(10,v.length))),u(v),s(v[0]||null),d(0)},A=v=>{n(v),i(!0),c(!1),f([]),w(v)},p=async v=>{f(R=>[...R,v]),await y(v.wordId,v),l<o.length-1?(d(R=>R+1),s(o[l+1])):(b(),c(!0))},N=()=>{i(!1),c(!1),f([]),d(0)},T=()=>{const v=m.filter(L=>L.isCorrect).length,R=m.length>0?v/m.length*100:0,I=m.reduce((L,ie)=>L+ie.timeSpent,0);return{correct:v,accuracy:R,totalTime:I}};if(!a)return e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"🏕️ TRAINING CAMP"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:"Choose your training mission"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{variant:"default",className:"p-6 text-center cursor-pointer hover:shadow-lg transition-all duration-200",onClick:()=>A("learn"),children:[e.jsx("div",{className:"text-6xl mb-4",children:"📚"}),e.jsx("h2",{className:"pixel-font text-xl text-contra-gold mb-2",children:"NEW RECRUITS"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray mb-4",children:"Learn new vocabulary words based on your current level"}),e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx("div",{className:"pixel-font text-xs text-pixel-white",children:"• 10 new words per session"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-white",children:"• Adaptive difficulty"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-white",children:"• +10 EXP per correct answer"})]}),e.jsx(C,{variant:"primary",className:"w-full mt-4",children:"BEGIN TRAINING"})]}),e.jsxs(E,{variant:"default",className:"p-6 text-center cursor-pointer hover:shadow-lg transition-all duration-200",onClick:()=>A("review"),children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔄"}),e.jsx("h2",{className:"pixel-font text-xl text-contra-gold mb-2",children:"REVIEW DRILL"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray mb-4",children:"Review words that need practice using spaced repetition"}),e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx("div",{className:"pixel-font text-xs text-pixel-white",children:"• Smart scheduling"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-white",children:"• Focus on weak areas"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-white",children:"• +5 EXP per review"})]}),e.jsx(C,{variant:"secondary",className:"w-full mt-4",children:"START REVIEW"})]})]}),g&&e.jsxs(E,{variant:"default",className:"p-6 mt-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"📊 TODAY'S PROGRESS"}),e.jsx($,{label:"DAILY OBJECTIVE",value:g.completed,max:g.target,variant:"exp",showPercentage:!0}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"pixel-font text-2xl text-contra-gold",children:g.completed}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"COMPLETED"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"pixel-font text-2xl text-contra-green",children:[Math.round(g.accuracy),"%"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"ACCURACY"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"pixel-font text-2xl text-power-up-blue",children:[Math.floor(g.timeSpent/60),"m"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"TIME"})]})]})]})]})});if(x){const v=T();return e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsx("div",{className:"container mx-auto max-w-2xl",children:e.jsxs(E,{variant:"default",className:"p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),e.jsx("h2",{className:"pixel-font text-2xl text-contra-gold mb-4",children:"SESSION COMPLETE!"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-3xl text-contra-gold",children:v.correct}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"CORRECT"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"pixel-font text-3xl text-contra-green",children:[Math.round(v.accuracy),"%"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"ACCURACY"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"pixel-font text-3xl text-power-up-blue",children:[Math.floor(v.totalTime/1e3),"s"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"TIME"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"pixel-font text-lg text-contra-gold mb-2",children:"EXPERIENCE EARNED"}),e.jsxs("div",{className:"pixel-font text-3xl text-yellow-400",children:["+",v.correct*10," EXP"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(C,{variant:"primary",className:"w-full",onClick:N,children:"CONTINUE TRAINING"}),e.jsx(C,{variant:"secondary",className:"w-full",onClick:()=>window.history.back(),children:"RETURN TO BASE"})]})]})})})}return e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"pixel-font text-2xl text-contra-gold",children:r==="learn"?"🏕️ NEW RECRUITS":"🔄 REVIEW DRILL"}),e.jsxs("p",{className:"pixel-font text-sm text-pixel-light-gray",children:["Word ",l+1," of ",o.length]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"pixel-font text-sm text-contra-green",children:[m.filter(v=>v.isCorrect).length," / ",m.length," CORRECT"]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:[Math.floor(m.reduce((v,R)=>v+R.timeSpent,0)/1e3),"s ELAPSED"]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx($,{label:"SESSION PROGRESS",value:l+1,max:o.length,variant:"exp",showPercentage:!0})}),t&&e.jsx(ye,{mode:"wait",children:e.jsx(wa,{word:t,onResult:p},t.id)}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(C,{variant:"secondary",onClick:()=>{b(),i(!1)},children:"ABORT MISSION"})})]})})},J=we((t,s)=>({currentTest:null,testHistory:[],isTestActive:!1,currentQuestionIndex:0,isLoading:!1,error:null,startTest:async(a,i=20)=>{const{user:r}=useUserStore.getState();if(r){t({isLoading:!0,error:null});try{const n=await s().generateQuestions(a,i),l={id:crypto.randomUUID(),userId:r.id,level:a,questions:n,answers:[],startTime:Date.now(),score:0,maxScore:n.length,passed:!1};t({currentTest:l,isTestActive:!0,currentQuestionIndex:0,isLoading:!1})}catch(n){console.error("Failed to start test:",n),t({error:"Failed to start test session",isLoading:!1})}}},answerQuestion:(a,i,r)=>{const{currentTest:n,currentQuestionIndex:l}=s();if(!n)return;const d=n.questions[l],o=i.toLowerCase().trim()===d.correctAnswer.toLowerCase().trim(),u={questionId:a,userAnswer:i,isCorrect:o,timeUsed:r},x=[...n.answers],c=x.findIndex(f=>f.questionId===a);c>=0?x[c]=u:x.push(u);const m={...n,answers:x};t({currentTest:m})},nextQuestion:()=>{const{currentTest:a,currentQuestionIndex:i}=s();!a||i>=a.questions.length-1||t({currentQuestionIndex:i+1})},previousQuestion:()=>{const{currentTest:a,currentQuestionIndex:i}=s();!a||i<=0||t({currentQuestionIndex:i-1})},endTest:async()=>{const{currentTest:a}=s(),{user:i}=useUserStore.getState();if(!(!a||!i))try{const r=Date.now(),n=r-a.startTime,l=a.answers.filter(b=>b.isCorrect).length,d=l,o=a.answers.length>0?l/a.answers.length*100:0,x=o>={beginner:70,intermediate:75,advanced:80,master:85}[a.level],c={...a,endTime:r,score:d,passed:x},m={id:crypto.randomUUID(),testId:c.id,score:d,maxScore:c.maxScore,accuracy:o,timeSpent:n,completedAt:new Date().toISOString(),weakAreas:s().identifyWeakAreas(c)};await D.saveTestResult(m);const f={...i.statistics,testResults:[...i.statistics.testResults,m]};await useUserStore.getState().updateUser({statistics:f});const w=Math.floor(d*5);x&&useUserStore.getState().addExperience(w),t({currentTest:null,isTestActive:!1,currentQuestionIndex:0}),s().getTestHistory(i.id)}catch(r){console.error("Failed to end test:",r),t({error:"Failed to save test results"})}},getTestHistory:async a=>{t({isLoading:!0,error:null});try{const r=(await D.getTestResults(a)).sort((n,l)=>new Date(l.completedAt).getTime()-new Date(n.completedAt).getTime());t({testHistory:r,isLoading:!1})}catch(i){console.error("Failed to get test history:",i),t({error:"Failed to load test history",isLoading:!1})}},generateQuestions:async(a,i)=>{await V.loadVocabularyData();const r=V.getAllWords(),n=[],l={beginner:[1,4],intermediate:[3,6],advanced:[5,8],master:[7,10]},[d,o]=l[a],u=r.filter(c=>c.difficulty>=d&&c.difficulty<=o);return[...u].sort(()=>Math.random()-.5).slice(0,Math.min(i,u.length)).forEach((c,m)=>{const f=["multiple_choice","fill_blank","context"],w=f[m%f.length];let b;switch(w){case"multiple_choice":b={id:`mc_${m}`,type:"multiple_choice",wordId:c.id,question:`What does "${c.word}" mean?`,options:Ue(c,r),correctAnswer:c.definitions[0].meaning,difficulty:c.difficulty,timeLimit:30};break;case"fill_blank":b={id:`fb_${m}`,type:"fill_blank",wordId:c.id,question:Sa(c),correctAnswer:c.word,difficulty:c.difficulty,timeLimit:20};break;case"context":b={id:`ctx_${m}`,type:"context",wordId:c.id,question:`Choose the correct word: ${Ea(c)}`,context:Ta(c),correctAnswer:c.word,difficulty:c.difficulty,timeLimit:25};break;default:b={id:`default_${m}`,type:"multiple_choice",wordId:c.id,question:`What does "${c.word}" mean?`,options:Ue(c,r),correctAnswer:c.definitions[0].meaning,difficulty:c.difficulty,timeLimit:30}}n.push(b)}),n},calculateScore:()=>{const{currentTest:a}=s();if(!a)return{score:0,maxScore:0,accuracy:0};const i=a.answers.filter(d=>d.isCorrect).length,r=i,n=a.maxScore,l=a.answers.length>0?i/a.answers.length*100:0;return{score:r,maxScore:n,accuracy:l}},identifyWeakAreas:a=>{const i=[];return a.answers.filter(n=>!n.isCorrect).forEach(n=>{const l=a.questions.find(d=>d.id===n.questionId);l&&(n.timeUsed>(l.timeLimit||30)*1e3*.8&&i.push("time_management"),l.type==="multiple_choice"?i.push("vocabulary_meaning"):l.type==="fill_blank"?i.push("spelling"):l.type==="context"&&i.push("context_usage"))}),[...new Set(i)]},pauseTest:()=>{t({isTestActive:!1})},resumeTest:()=>{t({isTestActive:!0})},clearError:()=>{t({error:null})}}));function Ue(t,s){const i=[t.definitions[0].meaning],r=s.filter(n=>n.id!==t.id);for(;i.length<4&&r.length>0;){const n=Math.floor(Math.random()*r.length),d=r[n].definitions[0].meaning;i.includes(d)||i.push(d),r.splice(n,1)}return i.sort(()=>Math.random()-.5)}function Sa(t){const s=t.definitions[0].examples;return s.length>0?s[0].replace(new RegExp(t.word,"gi"),"_____"):`The meaning of "${t.word}" is _____`}function Ea(t){const s=t.definitions[0].examples;return s.length>0?s[0].replace(new RegExp(t.word,"gi"),"_____"):"She has great _____ to solve complex problems."}function Ta(t){const s=t.definitions[0].examples;return s.length>0?`Context: ${s[0]}`:"Context: Choose the word that best fits the blank."}const Ra=()=>{const{user:t}=U(),{studyHistory:s,todayProgress:a}=G(),{testHistory:i}=J(),[r,n]=h.useState("week"),[l,d]=h.useState([]),[o,u]=h.useState({totalWords:0,masteredWords:0,learningWords:0,reviewWords:0,averageAccuracy:0,totalTimeSpent:0});h.useEffect(()=>{t&&(x(),c())},[t,s,i,r]);const x=async()=>{if(!t)return;await V.loadVocabularyData();const g=V.getAllWords(),S=t.masteredWords.length,j=t.learningWords.length,A=t.reviewWords.length,p=s.reduce((v,R)=>v+R.accuracy,0),N=s.length>0?p/s.length:0,T=s.reduce((v,R)=>v+R.timeSpent,0)+i.reduce((v,R)=>v+R.timeSpent,0);u({totalWords:g.length,masteredWords:S,learningWords:j,reviewWords:A,averageAccuracy:N,totalTimeSpent:T})},c=()=>{const g=new Date,S=[],j=r==="week"?7:r==="month"?30:90;for(let A=j-1;A>=0;A--){const p=new Date(g);p.setDate(p.getDate()-A);const N=p.toISOString().split("T")[0],T=s.filter(P=>P.completedAt.startsWith(N)),v=i.filter(P=>P.completedAt.startsWith(N)),R=T.reduce((P,M)=>P+M.wordsStudied,0),I=T.reduce((P,M)=>P+M.accuracy,0)+v.reduce((P,M)=>P+M.accuracy,0),L=T.length+v.length>0?I/(T.length+v.length):0,ie=T.reduce((P,M)=>P+M.timeSpent,0)+v.reduce((P,M)=>P+M.timeSpent,0),be=T.reduce((P,M)=>P+M.expGained,0)+v.reduce((P,M)=>P+Math.floor(M.score*5),0);S.push({date:N,wordsStudied:R,accuracy:L,timeSpent:ie,expGained:be})}d(S)},m=()=>{const g=new Date;let S=0;for(let j=0;j<365;j++){const A=new Date(g);A.setDate(A.getDate()-j);const p=A.toISOString().split("T")[0];if(s.some(T=>T.completedAt.startsWith(p))||i.some(T=>T.completedAt.startsWith(p)))S++;else if(j>0)break}return S},f=g=>{const S=Math.floor(g/3600),j=Math.floor(g%3600/60);return S>0?`${S}h ${j}m`:`${j}m`},b=(()=>{const g=o.masteredWords/o.totalWords*100;return g>=80?{level:"VOCABULARY MASTER",color:"text-contra-gold"}:g>=60?{level:"WORD WARRIOR",color:"text-purple-500"}:g>=40?{level:"LANGUAGE LEARNER",color:"text-blue-500"}:g>=20?{level:"WORD EXPLORER",color:"text-green-500"}:{level:"BEGINNING ADVENTURER",color:"text-yellow-500"}})(),y=m();return t?e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"📊 INTEL BRIEFING"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray mb-4",children:"Track your mission progress and analyze performance"}),e.jsx(C,{variant:"secondary",pixelSize:"sm",onClick:()=>window.location.href="/progress/analytics",children:"📈 ADVANCED ANALYTICS"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Be,{className:"text-contra-gold",size:20}),e.jsx("span",{className:"pixel-font text-xs text-contra-gold",children:"RANK"})]}),e.jsx("div",{className:"pixel-font text-2xl text-pixel-white mb-1",children:b.level}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["Level ",t.level]})]}),e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(_e,{className:"text-yellow-400",size:20}),e.jsx("span",{className:"pixel-font text-xs text-yellow-400",children:"STREAK"})]}),e.jsxs("div",{className:"pixel-font text-2xl text-pixel-white mb-1",children:[y," DAYS"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Keep it up!"})]}),e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(gt,{className:"text-purple-500",size:20}),e.jsx("span",{className:"pixel-font text-xs text-purple-500",children:"WORDS MASTERED"})]}),e.jsx("div",{className:"pixel-font text-2xl text-pixel-white mb-1",children:o.masteredWords}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:[Math.round(o.masteredWords/o.totalWords*100),"% of total"]})]}),e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ze,{className:"text-blue-500",size:20}),e.jsx("span",{className:"pixel-font text-xs text-blue-500",children:"TOTAL TIME"})]}),e.jsx("div",{className:"pixel-font text-2xl text-pixel-white mb-1",children:f(o.totalTimeSpent)}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Time invested"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"📈 VOCABULARY PROGRESS"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:"Mastered Words"}),e.jsxs("span",{className:"pixel-font text-sm text-contra-green",children:[o.masteredWords," / ",o.totalWords]})]}),e.jsx($,{value:o.masteredWords,max:o.totalWords,variant:"exp",showPercentage:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:"Currently Learning"}),e.jsxs("span",{className:"pixel-font text-sm text-power-up-blue",children:[o.learningWords," words"]})]}),e.jsx($,{value:o.learningWords,max:50,variant:"health"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:"Ready for Review"}),e.jsxs("span",{className:"pixel-font text-sm text-yellow-500",children:[o.reviewWords," words"]})]}),e.jsx($,{value:o.reviewWords,max:30,variant:"health"})]})]})]}),e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"🎯 PERFORMANCE METRICS"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:"Study Accuracy"}),e.jsxs("span",{className:"pixel-font text-sm text-contra-green",children:[Math.round(o.averageAccuracy),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:"Study Sessions"}),e.jsx("span",{className:"pixel-font text-sm text-pixel-white",children:s.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:"Tests Completed"}),e.jsx("span",{className:"pixel-font text-sm text-pixel-white",children:i.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:"Experience Points"}),e.jsxs("span",{className:"pixel-font text-sm text-yellow-400",children:[t.experience," EXP"]})]})]})]})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:["week","month","all"].map(g=>e.jsx(C,{variant:r===g?"primary":"secondary",pixelSize:"sm",onClick:()=>n(g),children:g.toUpperCase()},g))}),e.jsxs(E,{variant:"default",className:"p-6 mb-8",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"📅 ACTIVITY TIMELINE"}),e.jsx("div",{className:"space-y-3",children:l.slice(-7).map((g,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-pixel-gray/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${g.wordsStudied>0?"bg-contra-green":"bg-pixel-gray"}`}),e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:new Date(g.date).toLocaleDateString("en-US",{weekday:"short"})})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm",children:g.wordsStudied>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"pixel-font text-contra-green",children:[g.wordsStudied," words"]}),e.jsxs("span",{className:"pixel-font text-blue-400",children:[Math.round(g.accuracy),"%"]}),e.jsxs("span",{className:"pixel-font text-yellow-400",children:["+",g.expGained," EXP"]})]})})]},g.date))})]}),t.achievements.length>0&&e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"🏆 RECENT ACHIEVEMENTS"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.achievements.slice(-6).map(g=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pixel-gray/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:g.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:g.name}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:new Date(g.unlockedAt).toLocaleDateString()})]})]},g.id))})]})]})}):e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-4",children:"📊 INTEL BRIEFING"}),e.jsx("p",{className:"pixel-font text-pixel-light-gray",children:"Please initialize your profile first"})]})})},Aa=()=>{const{user:t}=U(),{studyHistory:s}=G(),{testHistory:a}=J(),[i,r]=h.useState("accuracy"),[n,l]=h.useState("month"),d=h.useMemo(()=>{if(!t)return null;const c={studyTrend:[],accuracyByDifficulty:[],timeDistribution:[],weeklyPatterns:[],learningCurve:[]},m=n==="week"?7:n==="month"?30:90,f=new Date;for(let j=m-1;j>=0;j--){const A=new Date(f);A.setDate(A.getDate()-j);const p=A.toISOString().split("T")[0],N=s.filter(R=>R.completedAt.startsWith(p)),T=N.reduce((R,I)=>R+I.wordsStudied,0),v=N.length>0?N.reduce((R,I)=>R+I.accuracy,0)/N.length:0;c.studyTrend.push({date:p,words:T,accuracy:v})}for(let j=1;j<=5;j++){const A=s.filter(N=>Math.floor(Math.random()*5)+1===j),p=A.length>0?A.reduce((N,T)=>N+T.accuracy,0)/A.length:0;c.accuracyByDifficulty.push({difficulty:j,accuracy:p,count:A.length})}const w=s.reduce((j,A)=>j+A.timeSpent,0),b=a.reduce((j,A)=>j+A.timeSpent,0),y=w+b;c.timeDistribution=[{activity:"Study Sessions",time:w,percentage:w/y*100},{activity:"Tests",time:b,percentage:b/y*100}];const g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];g.forEach(j=>{const A=g.indexOf(j),p=s.filter(T=>new Date(T.completedAt).getDay()===A).reduce((T,v)=>T+v.timeSpent,0),N=a.filter(T=>new Date(T.completedAt).getDay()===A).reduce((T,v)=>T+v.timeSpent,0);c.weeklyPatterns.push({day:j,studyTime:p,testTime:N})});let S=0;return s.sort((j,A)=>new Date(j.completedAt).getTime()-new Date(A.completedAt).getTime()).forEach(j=>{S+=j.wordsStudied,c.learningCurve.push({date:j.completedAt.split("T")[0],cumulativeWords:S,accuracy:j.accuracy})}),c},[t,s,a,n]),o=c=>{const m=Math.floor(c/3600),f=Math.floor(c%3600/60);return m>0?`${m}h ${f}m`:`${f}m`},x=(()=>{if(!d)return[];const c=[],m=d.studyTrend.filter(S=>S.words>0).length,f=d.studyTrend.length,w=m/f*100;w>=80&&c.push({icon:"🔥",title:"High Consistency",description:`You've studied ${m} out of ${f} days (${Math.round(w)}%)`});const b=d.studyTrend.slice(-7).reduce((S,j)=>S+j.accuracy,0)/7,y=d.studyTrend.slice(0,7).reduce((S,j)=>S+j.accuracy,0)/7;b>y+10&&c.push({icon:"📈",title:"Improving Accuracy",description:`Your accuracy has improved by ${Math.round(b-y)}%`});const g=d.timeDistribution.reduce((S,j)=>S+j.time,0);return g>3600&&c.push({icon:"⏰",title:"Time Investment",description:`You've invested ${o(g)} in learning`}),c})();return!t||!d?e.jsx("div",{className:"text-white",children:"Loading analytics..."}):e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"📊 ADVANCED ANALYTICS"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:"Deep dive into your learning patterns and performance"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"text-pixel-light-gray",size:16}),e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"METRIC:"})]}),["accuracy","time","words"].map(c=>e.jsx(C,{variant:i===c?"primary":"secondary",pixelSize:"sm",onClick:()=>r(c),children:c.toUpperCase()},c)),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx($e,{className:"text-pixel-light-gray",size:16}),e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"RANGE:"})]}),["week","month","quarter"].map(c=>e.jsx(C,{variant:n===c?"primary":"secondary",pixelSize:"sm",onClick:()=>l(c),children:c.toUpperCase()},c))]}),x.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:x.map((c,m)=>e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:c.icon}),e.jsx("h3",{className:"pixel-font text-sm text-contra-gold",children:c.title})]}),e.jsx("p",{className:"pixel-font text-xs text-pixel-light-gray",children:c.description})]},m))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"📈 STUDY TREND"}),e.jsx("div",{className:"space-y-2",children:d.studyTrend.slice(-7).map((c,m)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:new Date(c.date).toLocaleDateString("en-US",{weekday:"short"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 bg-pixel-gray rounded-full h-2",children:e.jsx("div",{className:"bg-contra-green h-full rounded-full",style:{width:`${Math.min(c.words*10,100)}%`}})}),e.jsxs("span",{className:"pixel-font text-xs text-contra-green",children:[c.words," words"]}),e.jsxs("span",{className:"pixel-font text-xs text-blue-400",children:[Math.round(c.accuracy),"%"]})]})]},c.date))})]}),e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"⏰ TIME DISTRIBUTION"}),e.jsx("div",{className:"space-y-4",children:d.timeDistribution.map((c,m)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"pixel-font text-sm text-pixel-light-gray",children:c.activity}),e.jsx("span",{className:"pixel-font text-sm text-pixel-white",children:o(c.time)})]}),e.jsx("div",{className:"w-full bg-pixel-gray rounded-full h-3",children:e.jsx("div",{className:`h-full rounded-full ${m===0?"bg-contra-green":"bg-power-up-blue"}`,style:{width:`${c.percentage}%`}})}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray mt-1",children:[Math.round(c.percentage),"% of total time"]})]},c.activity))})]}),e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"📅 WEEKLY PATTERNS"}),e.jsx("div",{className:"space-y-2",children:d.weeklyPatterns.map((c,m)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray w-8",children:c.day}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"bg-contra-green rounded-sm",style:{width:`${Math.min(c.studyTime/3600*20,100)}%`,height:"8px"}}),e.jsx("div",{className:"bg-power-up-blue rounded-sm",style:{width:`${Math.min(c.testTime/3600*20,100)}%`,height:"8px"}})]})}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("span",{className:"pixel-font text-contra-green",children:[Math.round(c.studyTime/60),"m"]}),e.jsxs("span",{className:"pixel-font text-power-up-blue",children:[Math.round(c.testTime/60),"m"]})]})]},c.day))}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-contra-green rounded-sm"}),e.jsx("span",{className:"pixel-font text-pixel-light-gray",children:"Study"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-power-up-blue rounded-sm"}),e.jsx("span",{className:"pixel-font text-pixel-light-gray",children:"Test"})]})]})]}),e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"🎯 ACCURACY BY DIFFICULTY"}),e.jsx("div",{className:"space-y-3",children:d.accuracyByDifficulty.map((c,m)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"⭐".repeat(c.difficulty)}),e.jsxs("span",{className:"pixel-font text-xs text-pixel-white",children:[Math.round(c.accuracy),"% (",c.count," sessions)"]})]}),e.jsx("div",{className:"w-full bg-pixel-gray rounded-full h-2",children:e.jsx("div",{className:"bg-contra-green h-full rounded-full",style:{width:`${c.accuracy}%`}})})]},c.difficulty))})]})]}),e.jsxs(E,{variant:"default",className:"p-6",children:[e.jsx("h3",{className:"pixel-font text-lg text-contra-gold mb-4",children:"📈 LEARNING CURVE"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.learningCurve.slice(-10).map((c,m)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-pixel-gray/20 rounded",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:new Date(c.date).toLocaleDateString()}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"pixel-font text-sm text-contra-green",children:[c.cumulativeWords," words"]}),e.jsxs("span",{className:"pixel-font text-sm text-blue-400",children:[Math.round(c.accuracy),"%"]})]})]},c.date))})]})]})})},Ca=({question:t,questionNumber:s,totalQuestions:a,onAnswer:i,onPrevious:r,onNext:n,canGoPrevious:l,canGoNext:d,currentAnswer:o})=>{const[u,x]=h.useState(o||""),[c,m]=h.useState(t.timeLimit||30),[f,w]=h.useState(!1);h.useEffect(()=>{x(o||""),w(!!o)},[o]),h.useEffect(()=>{if(c<=0){b();return}const g=setInterval(()=>{m(S=>S-1)},1e3);return()=>clearInterval(g)},[c]);const b=()=>{u&&!f&&(w(!0),i({questionId:t.id,userAnswer:u,isCorrect:u.toLowerCase().trim()===t.correctAnswer.toLowerCase().trim(),timeUsed:(t.timeLimit||30)-c}))},y=()=>{const g=c/(t.timeLimit||30)*100;return g>60?"bg-contra-green":g>30?"bg-yellow-500":"bg-red-500"};return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(E,{variant:"default",className:"p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"text-contra-gold",size:20}),e.jsxs("span",{className:"pixel-font text-sm text-contra-gold",children:["QUESTION ",s," OF ",a]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"text-pixel-light-gray",size:16}),e.jsxs("span",{className:`pixel-font text-sm ${c<=10?"text-red-500 animate-pulse":"text-pixel-light-gray"}`,children:[c,"s"]})]})]}),e.jsx("div",{className:"w-full bg-pixel-gray rounded-full h-2 mb-4",children:e.jsx(O.div,{className:`h-full rounded-full ${y()}`,initial:{width:"100%"},animate:{width:`${c/(t.timeLimit||30)*100}%`},transition:{duration:1}})}),e.jsx("div",{className:"inline-block px-3 py-1 bg-contra-gold/20 text-contra-gold pixel-font text-xs rounded mb-4",children:t.type.toUpperCase().replace("_"," ")})]}),e.jsxs(E,{variant:"default",className:"p-6 mb-4",children:[e.jsx("h3",{className:"pixel-font text-lg text-pixel-white mb-4",children:t.question}),t.context&&e.jsx("div",{className:"bg-pixel-gray rounded-lg p-4 mb-6",children:e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:t.context})}),t.type==="multiple_choice"&&t.options&&e.jsx("div",{className:"space-y-3 mb-6",children:t.options.map((g,S)=>e.jsx(O.button,{className:`w-full p-4 text-left rounded-lg border-2 transition-all pixel-font text-sm ${u===g?"border-contra-gold bg-contra-gold/20 text-pixel-white":"border-pixel-gray hover:border-pixel-light-gray text-pixel-light-gray hover:text-pixel-white"} ${f?"cursor-not-allowed opacity-60":"cursor-pointer"}`,onClick:()=>!f&&x(g),whileHover:f?{}:{scale:1.02},whileTap:f?{}:{scale:.98},disabled:f,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${u===g?"border-contra-gold bg-contra-gold":"border-pixel-gray"}`,children:u===g&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-pixel-black"})}),e.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+S),"."]}),e.jsx("span",{children:g})]})},S))}),t.type==="fill_blank"&&e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",className:"w-full p-4 bg-pixel-gray border-2 border-pixel-gray rounded-lg pixel-font text-pixel-white focus:border-contra-gold focus:outline-none disabled:opacity-50",placeholder:"Type your answer here...",value:u,onChange:g=>!f&&x(g.target.value),disabled:f})}),t.type==="context"&&e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",className:"w-full p-4 bg-pixel-gray border-2 border-pixel-gray rounded-lg pixel-font text-pixel-white focus:border-contra-gold focus:outline-none disabled:opacity-50",placeholder:"Enter the missing word...",value:u,onChange:g=>!f&&x(g.target.value),disabled:f})}),e.jsx(C,{variant:u&&!f?"primary":"secondary",className:"w-full",onClick:b,disabled:!u||f,children:f?"ANSWER SUBMITTED":"SUBMIT ANSWER"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(C,{variant:"secondary",pixelSize:"sm",onClick:r,disabled:!l,className:"flex items-center gap-2",children:[e.jsx(vt,{size:16}),"PREVIOUS"]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:[s," / ",a]}),e.jsxs(C,{variant:"secondary",pixelSize:"sm",onClick:n,disabled:!d,className:"flex items-center gap-2",children:["NEXT",e.jsx(jt,{size:16})]})]})]})},Ia=()=>{const[t,s]=h.useState("beginner"),[a,i]=h.useState(!0),{currentTest:r,isTestActive:n,currentQuestionIndex:l,startTest:d,answerQuestion:o,nextQuestion:u,previousQuestion:x,endTest:c}=J();if(U(),a)return e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"⚔️ COMBAT ZONE"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:"Test your vocabulary skills in battle"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[{level:"beginner",name:"NEW RECRUIT",icon:"🔰",desc:"70% to pass",color:"text-green-500"},{level:"intermediate",name:"SOLDIER",icon:"⚔️",desc:"75% to pass",color:"text-blue-500"},{level:"advanced",name:"VETERAN",icon:"🎖️",desc:"80% to pass",color:"text-purple-500"},{level:"master",name:"LEGEND",icon:"👑",desc:"85% to pass",color:"text-contra-gold"}].map(({level:w,name:b,icon:y,desc:g,color:S})=>e.jsxs(E,{variant:"default",className:`p-4 text-center cursor-pointer hover:shadow-lg transition-all duration-200 ${t===w?"ring-2 ring-contra-gold":""}`,onClick:()=>s(w),children:[e.jsx("div",{className:"text-4xl mb-2",children:y}),e.jsx("h3",{className:`pixel-font text-sm font-bold ${S} mb-1`,children:b}),e.jsx("p",{className:"pixel-font text-xs text-pixel-light-gray",children:g})]},w))}),e.jsxs(E,{variant:"default",className:"p-6 mb-6",children:[e.jsx("h2",{className:"pixel-font text-lg text-contra-gold mb-4",children:"📋 MISSION BRIEFING"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-contra-gold",children:"•"}),e.jsx("span",{className:"pixel-font text-pixel-light-gray",children:"Answer 20 vocabulary questions to test your skills"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-contra-gold",children:"•"}),e.jsx("span",{className:"pixel-font text-pixel-light-gray",children:"Each question has a time limit - answer quickly and accurately"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-contra-gold",children:"•"}),e.jsxs("span",{className:"pixel-font text-pixel-light-gray",children:["You need ",t==="beginner"?"70%":t==="intermediate"?"75%":t==="advanced"?"80%":"85%"," to pass"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-contra-gold",children:"•"}),e.jsx("span",{className:"pixel-font text-pixel-light-gray",children:"Earn bonus EXP for high scores and quick completion"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(C,{variant:"primary",className:"text-lg px-8",onClick:()=>{d(t,20),i(!1)},children:"BEGIN COMBAT"})})]})});if(!r||!n)return null;const m=r.questions[l],f=r.answers.find(w=>w.questionId===m.id);return m?e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"pixel-font text-2xl text-contra-gold",children:"⚔️ COMBAT ZONE"}),e.jsxs("p",{className:"pixel-font text-sm text-pixel-light-gray",children:[t.toUpperCase()," LEVEL"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"pixel-font text-sm text-contra-green",children:[r.answers.filter(w=>w.isCorrect).length," CORRECT"]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["Question ",l+1," of ",r.questions.length]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx($,{label:"TEST PROGRESS",value:l+1,max:r.questions.length,variant:"exp",showPercentage:!0})}),e.jsx(ye,{mode:"wait",children:e.jsx(Ca,{question:m,questionNumber:l+1,totalQuestions:r.questions.length,onAnswer:o,onPrevious:x,onNext:u,canGoPrevious:l>0,canGoNext:l<r.questions.length-1,currentAnswer:f==null?void 0:f.userAnswer},m.id)}),l===r.questions.length-1&&e.jsx("div",{className:"text-center mt-6",children:e.jsx(C,{variant:"danger",onClick:c,children:"FINISH TEST"})})]})}):null},Da=({testResult:t,onRetry:s,onContinue:a})=>{U();const r=(()=>t.accuracy>=90?{level:"PERFECT",color:"text-contra-gold",emoji:"🏆"}:t.accuracy>=80?{level:"EXCELLENT",color:"text-contra-green",emoji:"⭐"}:t.accuracy>=70?{level:"GOOD",color:"text-blue-500",emoji:"👍"}:t.accuracy>=60?{level:"NEEDS IMPROVEMENT",color:"text-yellow-500",emoji:"📚"}:{level:"KEEP PRACTICING",color:"text-red-500",emoji:"💪"})(),n=t.accuracy>=70,l=d=>{const o=Math.floor(d/60),u=d%60;return`${o}:${u.toString().padStart(2,"0")}`};return e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(O.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20},className:"text-6xl mb-4",children:n?"🎉":"💪"}),e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"MISSION COMPLETE!"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:"Test results are ready for review"})]}),e.jsxs(E,{variant:"default",className:"p-6 mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:`pixel-font text-2xl font-bold ${r.color} mb-2`,children:[r.emoji," ",r.level]}),e.jsxs("div",{className:"pixel-font text-lg text-pixel-white mb-1",children:[Math.round(t.accuracy),"% ACCURACY"]}),e.jsxs("div",{className:"pixel-font text-sm text-pixel-light-gray",children:[t.score," / ",t.maxScore," QUESTIONS CORRECT"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl text-contra-gold mb-1",children:t.score}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"CORRECT"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl text-red-500 mb-1",children:t.maxScore-t.score}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"INCORRECT"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl text-power-up-blue mb-1",children:l(Math.floor(t.timeSpent/1e3))}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"TIME SPENT"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx($,{label:"OVERALL PERFORMANCE",value:t.accuracy,max:100,variant:"exp",showPercentage:!0})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ge,{className:"text-contra-gold",size:20}),e.jsx("span",{className:"pixel-font text-sm text-contra-gold",children:"ACCURACY ANALYSIS"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"Correct Rate:"}),e.jsxs("span",{className:"pixel-font text-sm text-contra-green",children:[Math.round(t.accuracy),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"Error Rate:"}),e.jsxs("span",{className:"pixel-font text-sm text-red-500",children:[Math.round(100-t.accuracy),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"Avg Time/Question:"}),e.jsxs("span",{className:"pixel-font text-sm text-power-up-blue",children:[Math.round(t.timeSpent/t.maxScore/1e3),"s"]})]})]})]}),e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Nt,{className:"text-contra-gold",size:20}),e.jsx("span",{className:"pixel-font text-sm text-contra-gold",children:"PERFORMANCE INSIGHTS"})]}),e.jsx("div",{className:"space-y-2",children:t.weakAreas.length>0?t.weakAreas.map((d,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"text-red-500",size:16}),e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:d.replace("_"," ").toUpperCase()})]},o)):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"text-contra-green",size:16}),e.jsx("span",{className:"pixel-font text-xs text-contra-green",children:"NO WEAK AREAS IDENTIFIED"})]})})]})]}),e.jsx(E,{variant:"default",className:"p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"pixel-font text-sm text-contra-gold mb-2",children:"EXPERIENCE EARNED"}),e.jsxs(O.div,{className:"pixel-font text-4xl text-yellow-400 mb-2",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20},children:["+",Math.floor(t.score*5)," EXP"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Based on your performance"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx(C,{variant:"primary",className:"flex-1",onClick:a,children:"CONTINUE MISSION"}),e.jsx(C,{variant:"secondary",className:"flex-1",onClick:s,children:"RETRY CHALLENGE"})]}),!n&&e.jsxs(E,{variant:"default",className:"p-4 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Be,{className:"text-contra-gold",size:20}),e.jsx("span",{className:"pixel-font text-sm text-contra-gold",children:"RECOMMENDATIONS"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"• Focus on vocabulary meaning and usage"}),e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"• Practice with flashcards and context examples"}),e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"• Review similar words to build connections"}),e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"• Try the beginner level to build confidence"})]})]})]})})},ka=()=>{const{testHistory:t}=J(),{user:s}=U();return s?e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"📊 TEST HISTORY"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:"Review your past performance"})]}),t.length===0?e.jsxs(E,{variant:"default",className:"p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📝"}),e.jsx("h2",{className:"pixel-font text-xl text-contra-gold mb-2",children:"NO TESTS YET"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray mb-4",children:"Complete your first test to see your results here"}),e.jsx(C,{variant:"primary",onClick:()=>window.history.back(),children:"START YOUR FIRST TEST"})]}):e.jsx("div",{className:"space-y-4",children:t.map((a,i)=>e.jsxs(E,{variant:"default",className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-2xl",children:a.accuracy>=70?"🏆":"📚"}),e.jsxs("div",{children:[e.jsxs("div",{className:"pixel-font text-sm text-pixel-white",children:["Test #",t.length-i]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:new Date(a.completedAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"pixel-font text-lg text-contra-gold",children:[Math.round(a.accuracy),"%"]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:[a.score,"/",a.maxScore," correct"]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-pixel-gray",children:e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("span",{className:"pixel-font text-pixel-light-gray",children:["Time: ",Math.floor(a.timeSpent/1e3),"s"]}),e.jsx("span",{className:`pixel-font ${a.accuracy>=70?"text-contra-green":"text-red-500"}`,children:a.accuracy>=70?"PASSED":"FAILED"})]})})]},a.id))})]})}):null},Oa=()=>{const{user:t,updateUser:s}=U(),{studyHistory:a}=G(),{testHistory:i}=J(),[r,n]=h.useState({soundEnabled:!0,notificationsEnabled:!0,darkMode:!0,language:"en",dailyGoal:20,studyReminders:!0,reminderTime:"19:00",autoPlayAudio:!1,difficultyPreference:"adaptive",theme:"classic"}),[l,d]=h.useState(!1),[o,u]=h.useState(!1),[x,c]=h.useState(!1),[m,f]=h.useState(!1);h.useEffect(()=>{w()},[]);const w=()=>{const N=localStorage.getItem("appSettings");N&&n({...r,...JSON.parse(N)})},b=()=>{localStorage.setItem("appSettings",JSON.stringify(r)),Na.toggleMute(!r.soundEnabled)},y=(N,T)=>{const v={...r,[N]:T};n(v),b()},g=async()=>{d(!0);try{const N={user:t,studyHistory:a,testHistory:i,settings:r,exportDate:new Date().toISOString(),version:"1.0"},T=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),v=URL.createObjectURL(T),R=document.createElement("a");R.href=v,R.download=`ielts-vocab-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(v)}catch(N){console.error("Export failed:",N)}finally{d(!1)}},S=async N=>{var v;const T=(v=N.target.files)==null?void 0:v[0];if(T){u(!0);try{const R=await T.text(),I=JSON.parse(R);I.user&&I.studyHistory&&I.testHistory?(await D.saveUserData(I.user),await D.saveStudyHistory(I.studyHistory),await D.saveTestHistory(I.testHistory),s(I.user),alert("Data imported successfully! Please refresh the page."),window.location.reload()):alert("Invalid backup file format.")}catch(R){console.error("Import failed:",R),alert("Failed to import data. Please check the file format.")}finally{u(!1)}}},j=async()=>{c(!0);try{await D.clearAllData(),localStorage.clear(),s(null),alert("All data has been reset. Please refresh the page."),window.location.reload()}catch(N){console.error("Reset failed:",N),alert("Failed to reset data.")}finally{c(!1),f(!1)}},p=(()=>({totalSize:(new Blob([JSON.stringify(t),JSON.stringify(a),JSON.stringify(i)]).size/1024).toFixed(2)+" KB",studySessions:a.length,testResults:i.length,masteredWords:(t==null?void 0:t.masteredWords.length)||0}))();return e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"🛠️ ARMORY"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:"Configure your mission settings and preferences"})]}),e.jsxs(E,{variant:"default",className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ue,{className:"text-contra-gold",size:20}),e.jsx("h3",{className:"pixel-font text-lg text-contra-gold",children:"AUDIO SETTINGS"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:"Sound Effects"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Enable game sounds and feedback"})]}),e.jsx(C,{variant:r.soundEnabled?"primary":"secondary",pixelSize:"sm",onClick:()=>y("soundEnabled",!r.soundEnabled),children:r.soundEnabled?e.jsx(ue,{size:16}):e.jsx(bt,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:"Auto-play Audio"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Automatically play word pronunciations"})]}),e.jsx(C,{variant:r.autoPlayAudio?"primary":"secondary",pixelSize:"sm",onClick:()=>y("autoPlayAudio",!r.autoPlayAudio),children:r.autoPlayAudio?"ON":"OFF"})]})]})]}),e.jsxs(E,{variant:"default",className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(St,{className:"text-contra-gold",size:20}),e.jsx("h3",{className:"pixel-font text-lg text-contra-gold",children:"STUDY PREFERENCES"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:"Daily Goal"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Words to study per day"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"secondary",pixelSize:"sm",onClick:()=>y("dailyGoal",Math.max(5,r.dailyGoal-5)),children:"-"}),e.jsx("span",{className:"pixel-font text-sm text-pixel-white w-12 text-center",children:r.dailyGoal}),e.jsx(C,{variant:"secondary",pixelSize:"sm",onClick:()=>y("dailyGoal",Math.min(50,r.dailyGoal+5)),children:"+"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:"Difficulty"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Adaptive or manual difficulty selection"})]}),e.jsx(C,{variant:r.difficultyPreference==="adaptive"?"primary":"secondary",pixelSize:"sm",onClick:()=>y("difficultyPreference",r.difficultyPreference==="adaptive"?"manual":"adaptive"),children:r.difficultyPreference==="adaptive"?"ADAPTIVE":"MANUAL"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:"Study Reminders"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Daily study notifications"})]}),e.jsx(C,{variant:r.studyReminders?"primary":"secondary",pixelSize:"sm",onClick:()=>y("studyReminders",!r.studyReminders),children:r.studyReminders?e.jsx(Et,{size:16}):e.jsx(Tt,{size:16})})]})]})]}),e.jsxs(E,{variant:"default",className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Rt,{className:"text-contra-gold",size:20}),e.jsx("h3",{className:"pixel-font text-lg text-contra-gold",children:"APPEARANCE"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:"Theme"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Color scheme for the interface"})]}),e.jsx("div",{className:"flex gap-2",children:["classic","neon","monochrome"].map(N=>e.jsx(C,{variant:r.theme===N?"primary":"secondary",pixelSize:"sm",onClick:()=>y("theme",N),children:N.toUpperCase()},N))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:"Language"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Interface language"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{variant:r.language==="en"?"primary":"secondary",pixelSize:"sm",onClick:()=>y("language","en"),children:"EN"}),e.jsx(C,{variant:r.language==="zh"?"primary":"secondary",pixelSize:"sm",onClick:()=>y("language","zh"),children:"中文"})]})]})]})]}),e.jsxs(E,{variant:"default",className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(At,{className:"text-contra-gold",size:20}),e.jsx("h3",{className:"pixel-font text-lg text-contra-gold",children:"DATA MANAGEMENT"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-pixel-gray/30 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"Storage Used"}),e.jsx("div",{className:"pixel-font text-pixel-white",children:p.totalSize})]}),e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"Study Sessions"}),e.jsx("div",{className:"pixel-font text-pixel-white",children:p.studySessions})]}),e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"Test Results"}),e.jsx("div",{className:"pixel-font text-pixel-white",children:p.testResults})]}),e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-pixel-light-gray",children:"Mastered Words"}),e.jsx("div",{className:"pixel-font text-pixel-white",children:p.masteredWords})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs(C,{variant:"secondary",onClick:g,disabled:l,className:"flex items-center gap-2",children:[e.jsx(Ct,{size:16}),l?"EXPORTING...":"EXPORT DATA"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".json",onChange:S,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:o}),e.jsxs(C,{variant:"secondary",disabled:o,className:"w-full flex items-center gap-2",children:[e.jsx(It,{size:16}),o?"IMPORTING...":"IMPORT DATA"]})]})]}),e.jsxs("div",{className:"border-t border-pixel-gray pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"pixel-font text-sm text-red-500",children:"Reset All Data"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Permanently delete all progress and settings"})]}),e.jsx(C,{variant:"danger",onClick:()=>f(!0),disabled:x,children:x?e.jsx(Dt,{size:16,className:"animate-spin"}):e.jsx(kt,{size:16})})]}),m&&e.jsxs("div",{className:"mt-4 p-4 bg-red-500/20 border border-red-500 rounded-lg",children:[e.jsx("div",{className:"pixel-font text-sm text-red-500 mb-2",children:"⚠️ WARNING: This action cannot be undone!"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray mb-3",children:"All your progress, settings, and data will be permanently deleted."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{variant:"danger",onClick:j,className:"flex-1",children:"YES, RESET EVERYTHING"}),e.jsx(C,{variant:"secondary",onClick:()=>f(!1),className:"flex-1",children:"CANCEL"})]})]})]})]})]}),e.jsxs(E,{variant:"default",className:"p-6 text-center",children:[e.jsx("div",{className:"pixel-font text-lg text-contra-gold mb-2",children:"IELTS Vocabulary Trainer"}),e.jsx("div",{className:"pixel-font text-sm text-pixel-light-gray mb-2",children:"Version 1.0.0"}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"A retro gaming approach to vocabulary mastery"})]})]})})},Pa=()=>{var j,A;const{user:t,unlockAchievement:s}=U(),{studyHistory:a}=G(),{testHistory:i}=J(),[r,n]=h.useState([]),[l,d]=h.useState([]),[o,u]=h.useState(null),[x,c]=h.useState("all"),m=[{id:"first_word",name:"First Steps",description:"Study your first word",icon:"🌟",category:"learning",requirement:{type:"words_studied",value:1},reward:{exp:50,title:"Word Explorer"}},{id:"word_novice",name:"Word Novice",description:"Study 50 words",icon:"📚",category:"learning",requirement:{type:"words_studied",value:50},reward:{exp:100,title:"Novice Learner"}},{id:"word_expert",name:"Word Expert",description:"Study 200 words",icon:"🎓",category:"learning",requirement:{type:"words_studied",value:200},reward:{exp:300,title:"Word Expert"}},{id:"word_master",name:"Word Master",description:"Study 500 words",icon:"👑",category:"learning",requirement:{type:"words_studied",value:500},reward:{exp:500,title:"Word Master"}},{id:"accuracy_scholar",name:"Accuracy Scholar",description:"Achieve 90% accuracy in a study session",icon:"🎯",category:"accuracy",requirement:{type:"session_accuracy",value:90},reward:{exp:150,title:"Sharpshooter"}},{id:"perfectionist",name:"Perfectionist",description:"Achieve 100% accuracy in a study session",icon:"💯",category:"accuracy",requirement:{type:"session_accuracy",value:100},reward:{exp:250,title:"Perfectionist"}},{id:"week_streak",name:"Week Warrior",description:"Study for 7 consecutive days",icon:"🔥",category:"consistency",requirement:{type:"streak_days",value:7},reward:{exp:200,title:"Dedicated Learner"}},{id:"month_streak",name:"Month Master",description:"Study for 30 consecutive days",icon:"🌟",category:"consistency",requirement:{type:"streak_days",value:30},reward:{exp:500,title:"Consistency Master"}},{id:"test_beginner",name:"Test Beginner",description:"Complete your first test",icon:"📝",category:"testing",requirement:{type:"tests_completed",value:1},reward:{exp:100,title:"Test Taker"}},{id:"test_expert",name:"Test Expert",description:"Complete 10 tests with 80%+ accuracy",icon:"🏆",category:"testing",requirement:{type:"tests_high_score",value:10},reward:{exp:400,title:"Test Expert"}},{id:"time_warrior",name:"Time Warrior",description:"Study for 10 hours total",icon:"⏰",category:"time",requirement:{type:"time_spent",value:36e3},reward:{exp:300,title:"Time Warrior"}},{id:"marathon_learner",name:"Marathon Learner",description:"Study for 50 hours total",icon:"🏃",category:"time",requirement:{type:"time_spent",value:18e4},reward:{exp:1e3,title:"Marathon Learner"}},{id:"early_bird",name:"Early Bird",description:"Study before 8 AM 5 times",icon:"🌅",category:"special",requirement:{type:"early_sessions",value:5},reward:{exp:200,title:"Early Bird"}},{id:"night_owl",name:"Night Owl",description:"Study after 10 PM 5 times",icon:"🌙",category:"special",requirement:{type:"late_sessions",value:5},reward:{exp:200,title:"Night Owl"}}];h.useEffect(()=>{t&&(f(),w())},[t,a,i]);const f=()=>{if(!t)return;const p=m.map(N=>{const T=t.achievements.some(L=>L.id===N.id),v=t.achievements.find(L=>L.id===N.id);let R=0,I=N.requirement.value;switch(N.requirement.type){case"words_studied":R=t.statistics.totalWordsStudied;break;case"session_accuracy":R=Math.max(...a.map(_=>_.accuracy),0);break;case"streak_days":R=t.streak;break;case"tests_completed":R=i.length;break;case"tests_high_score":R=i.filter(_=>_.accuracy>=80).length;break;case"time_spent":R=a.reduce((_,K)=>_+K.timeSpent,0)+i.reduce((_,K)=>_+K.timeSpent,0);break;case"early_sessions":R=a.filter(_=>new Date(_.completedAt).getHours()<8).length;break;case"late_sessions":R=a.filter(_=>new Date(_.completedAt).getHours()>=22).length;break}return{achievement:N,progress:Math.min(R,I),maxProgress:I,isUnlocked:T,unlockedAt:v==null?void 0:v.unlockedAt}});n(p),p.forEach(N=>{N.isUnlocked&&!t.achievements.some(T=>T.id===N.achievement.id)&&(s(N.achievement),u(N.achievement.id),setTimeout(()=>u(null),3e3))})},w=()=>{const p=[{id:"daily_words",title:"Daily Words",description:"Study 10 words today",icon:"📚",reward:50,completed:!1,progress:0,target:10},{id:"daily_session",title:"Study Session",description:"Complete one study session",icon:"🎯",reward:30,completed:!1,progress:0,target:1},{id:"daily_accuracy",title:"Accuracy Master",description:"Achieve 85% accuracy today",icon:"🎯",reward:75,completed:!1,progress:0,target:85}],N=new Date().toISOString().split("T")[0],T=a.filter(I=>I.completedAt.startsWith(N)),v=T.reduce((I,L)=>I+L.wordsStudied,0),R=T.length>0?T.reduce((I,L)=>I+L.accuracy,0)/T.length:0;p[0].progress=v,p[0].completed=v>=10,p[1].progress=T.length,p[1].completed=T.length>=1,p[2].progress=R,p[2].completed=R>=85,d(p)},b=p=>p==="all"?r:r.filter(N=>N.achievement.category===p),y=()=>{const p=r.filter(N=>N.isUnlocked).length;return Math.round(p/m.length*100)},g=()=>r.filter(p=>p.isUnlocked).reduce((p,N)=>p+N.achievement.reward.exp,0),S=[{id:"all",name:"All",icon:"🏆"},{id:"learning",name:"Learning",icon:"📚"},{id:"accuracy",name:"Accuracy",icon:"🎯"},{id:"consistency",name:"Consistency",icon:"🔥"},{id:"testing",name:"Testing",icon:"📝"},{id:"time",name:"Time",icon:"⏰"},{id:"special",name:"Special",icon:"⭐"}];return t?e.jsx("div",{className:"min-h-screen bg-pixel-black crt-effect p-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"pixel-font text-3xl text-contra-gold mb-2",children:"🏆 ACHIEVEMENT HALL"}),e.jsx("p",{className:"pixel-font text-sm text-pixel-light-gray",children:"Unlock achievements and track your progress"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs(E,{variant:"default",className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"🏆"}),e.jsx("div",{className:"pixel-font text-2xl text-contra-gold mb-1",children:r.filter(p=>p.isUnlocked).length}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["of ",m.length," achievements"]}),e.jsx($,{value:r.filter(p=>p.isUnlocked).length,max:m.length,variant:"exp",className:"mt-2"})]}),e.jsxs(E,{variant:"default",className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"⭐"}),e.jsx("div",{className:"pixel-font text-2xl text-yellow-400 mb-1",children:g()}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Total EXP earned"})]}),e.jsxs(E,{variant:"default",className:"p-4 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"📊"}),e.jsxs("div",{className:"pixel-font text-2xl text-contra-green mb-1",children:[y(),"%"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:"Completion rate"})]})]}),e.jsxs(E,{variant:"default",className:"p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx($e,{className:"text-contra-gold",size:20}),e.jsx("h3",{className:"pixel-font text-lg text-contra-gold",children:"DAILY CHALLENGES"}),e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:new Date().toLocaleDateString()})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.map(p=>e.jsxs("div",{className:`p-4 rounded-lg border-2 ${p.completed?"border-contra-green bg-contra-green/20":"border-pixel-gray bg-pixel-gray/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:p.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white",children:p.title}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:p.description})]}),p.completed&&e.jsx(Fe,{className:"text-contra-green",size:20})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"pixel-font text-xs text-yellow-400",children:["+",p.reward," EXP"]}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray",children:p.completed?"COMPLETED":`${Math.round(p.progress)}/${p.target}`})]}),!p.completed&&e.jsx("div",{className:"w-full bg-pixel-gray rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-contra-gold h-full rounded-full",style:{width:`${p.progress/p.target*100}%`}})})]},p.id))})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:S.map(p=>e.jsxs(C,{variant:x===p.id?"primary":"secondary",pixelSize:"sm",onClick:()=>c(p.id),className:"flex items-center gap-2",children:[e.jsx("span",{children:p.icon}),e.jsx("span",{children:p.name})]},p.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b(x).map(p=>e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(E,{variant:p.isUnlocked?"default":"secondary",className:`p-4 h-full ${p.isUnlocked?"border-contra-gold":"opacity-60"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:p.isUnlocked?p.achievement.icon:"🔒"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"pixel-font text-sm text-pixel-white mb-1",children:p.achievement.name}),e.jsx("div",{className:"pixel-font text-xs text-pixel-light-gray mb-2",children:p.achievement.description}),p.isUnlocked?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"text-yellow-400",size:12}),e.jsxs("span",{className:"pixel-font text-xs text-yellow-400",children:["+",p.achievement.reward.exp," EXP"]})]}),p.achievement.reward.title&&e.jsxs("div",{className:"pixel-font text-xs text-contra-green",children:["Title: ",p.achievement.reward.title]}),e.jsxs("div",{className:"pixel-font text-xs text-pixel-light-gray",children:["Unlocked: ",p.unlockedAt?new Date(p.unlockedAt).toLocaleDateString():"Unknown"]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"pixel-font text-xs text-pixel-light-gray",children:"Progress"}),e.jsxs("span",{className:"pixel-font text-xs text-pixel-white",children:[p.progress,"/",p.maxProgress]})]}),e.jsx("div",{className:"w-full bg-pixel-gray rounded-full h-2",children:e.jsx("div",{className:"bg-contra-gold h-full rounded-full",style:{width:`${p.progress/p.maxProgress*100}%`}})})]})]})]})})},p.achievement.id))}),e.jsx(ye,{children:o&&e.jsx(O.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"fixed inset-0 flex items-center justify-center bg-black/80 z-50",children:e.jsxs(E,{variant:"default",className:"p-8 text-center",children:[e.jsx(O.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},className:"text-6xl mb-4",children:"🏆"}),e.jsx("h2",{className:"pixel-font text-2xl text-contra-gold mb-2",children:"ACHIEVEMENT UNLOCKED!"}),e.jsx("p",{className:"pixel-font text-lg text-pixel-white mb-4",children:(j=r.find(p=>p.achievement.id===o))==null?void 0:j.achievement.name}),e.jsxs("div",{className:"pixel-font text-sm text-yellow-400",children:["+",(A=r.find(p=>p.achievement.id===o))==null?void 0:A.achievement.reward.exp," EXP"]})]})})})]})}):e.jsx("div",{className:"text-white",children:"Loading achievements..."})};function La(){return U(),e.jsx(ks,{children:e.jsx("div",{className:"App",children:e.jsxs(Cs,{children:[e.jsx(B,{path:"/",element:e.jsx(fa,{})}),e.jsx(B,{path:"/study",element:e.jsx(ba,{})}),e.jsx(B,{path:"/test",element:e.jsx(Ia,{})}),e.jsx(B,{path:"/test/results",element:e.jsx(Da,{testResult:void 0,onRetry:()=>{},onContinue:()=>{}})}),e.jsx(B,{path:"/test/history",element:e.jsx(ka,{})}),e.jsx(B,{path:"/progress",element:e.jsx(Ra,{})}),e.jsx(B,{path:"/progress/analytics",element:e.jsx(Aa,{})}),e.jsx(B,{path:"/settings",element:e.jsx(Oa,{})}),e.jsx(B,{path:"/achievements",element:e.jsx(Pa,{})}),e.jsx(B,{path:"*",element:e.jsx(Rs,{to:"/",replace:!0})})]})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});me.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(La,{})}));
